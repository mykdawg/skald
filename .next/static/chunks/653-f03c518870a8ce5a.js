(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{2798:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiAuthenticator=function(e){return t=>{let r={};return e.forEach(e=>{let s=e(t)||{};r=Object.assign(r,s)}),r}},t.noAuthFn=function(){return()=>{}},t.usernamePasswordAuthenticator=function(e,t){return()=>({user:"function"==typeof e?e():e,pass:"function"==typeof t?t():t})},t.tokenAuthenticator=function(e){return()=>({auth_token:"function"==typeof e?e():e})},t.nkeyAuthenticator=n,t.jwtAuthenticator=o,t.credsAuthenticator=function(e){let t="function"!=typeof e?()=>e:e,r=()=>{let e=/\s*(?:(?:[-]{3,}[^\n]*[-]{3,}\n)(.+)(?:\n\s*[-]{3,}[^\n]*[-]{3,}\n))/ig,r=i.TD.decode(t()),s=e.exec(r);if(!s)throw Error("unable to parse credentials");let n=s[1].trim();if(!(s=e.exec(r)))throw Error("unable to parse credentials");return{jwt:n,seed:i.TE.encode(s[1].trim())}};return o(()=>{let{jwt:e}=r();return e},()=>{let{seed:e}=r();return e})};let s=r(3267),i=r(1634);function n(e){return t=>{let r="function"==typeof e?e():e,n=r?s.nkeys.fromSeed(r):void 0,o=n?n.getPublicKey():"",a=i.TE.encode(t||""),c=void 0!==n&&t?n.sign(a):void 0;return{nkey:o,sig:c?s.nkeys.encode(c):""}}}function o(e,t){return r=>{let s="function"==typeof e?e():e,{nkey:i,sig:o}=n(t)(r);return{jwt:s,nkey:i,sig:o}}}},8843:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bench=t.Metric=void 0,t.throughput=c,t.msgThroughput=function(e,t){return`${Math.floor(e/t)} msgs/sec`},t.humanizeBytes=u;let s=r(2724),i=r(4723),n=r(4731);class o{name;duration;date;payload;msgs;lang;version;bytes;asyncRequests;min;max;constructor(e,t){this.name=e,this.duration=t,this.date=Date.now(),this.payload=0,this.msgs=0,this.bytes=0}toString(){let e=this.duration/1e3,t=Math.round(this.msgs/e),r=this.asyncRequests?"asyncRequests":"",s="";return this.max&&(s=`${this.min}/${this.max}`),`${this.name}${r?" [asyncRequests]":""} ${t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")} msgs/sec - [${e.toFixed(2)} secs] ~ ${c(this.bytes,e)} ${s}`}toCsv(){return`"${this.name}",${new Date(this.date).toISOString()},${this.lang},${this.version},${this.msgs},${this.payload},${this.bytes},${this.duration},${!!this.asyncRequests&&this.asyncRequests}
`}static header(){return`Test,Date,Lang,Version,Count,MsgPayload,Bytes,Millis,Async
`}}t.Metric=o;class a{nc;callbacks;msgs;size;subject;asyncRequests;pub;sub;req;rep;perf;payload;constructor(e,t={msgs:1e5,size:128,subject:"",asyncRequests:!1,pub:!1,sub:!1,req:!1,rep:!1}){if(this.nc=e,this.callbacks=t.callbacks||!1,this.msgs=t.msgs||0,this.size=t.size||0,this.subject=t.subject||i.nuid.next(),this.asyncRequests=t.asyncRequests||!1,this.pub=t.pub||!1,this.sub=t.sub||!1,this.req=t.req||!1,this.rep=t.rep||!1,this.perf=new n.Perf,this.payload=this.size?new Uint8Array(this.size):s.Empty,!this.pub&&!this.sub&&!this.req&&!this.rep)throw Error("no options selected")}async run(){return this.nc.closed().then(e=>{if(e)throw e}),this.callbacks?await this.runCallbacks():await this.runAsync(),this.processMetrics()}processMetrics(){let{lang:e,version:t}=this.nc.protocol.transport;this.pub&&this.sub&&this.perf.measure("pubsub","pubStart","subStop"),this.req&&this.rep&&this.perf.measure("reqrep","reqStart","reqStop");let r=this.perf.getEntries(),s=r.find(e=>"pubsub"===e.name),i=r.find(e=>"reqrep"===e.name),n=r.find(e=>"req"===e.name),a=r.find(e=>"rep"===e.name),c=r.find(e=>"pub"===e.name),u=r.find(e=>"sub"===e.name),h=this.nc.stats(),l=[];if(s){let{name:r,duration:i}=s,n=new o(r,i);n.msgs=2*this.msgs,n.bytes=h.inBytes+h.outBytes,n.lang=e,n.version=t,n.payload=this.payload.length,l.push(n)}if(i){let{name:r,duration:s}=i,n=new o(r,s);n.msgs=2*this.msgs,n.bytes=h.inBytes+h.outBytes,n.lang=e,n.version=t,n.payload=this.payload.length,l.push(n)}if(c){let{name:r,duration:s}=c,i=new o(r,s);i.msgs=this.msgs,i.bytes=h.outBytes,i.lang=e,i.version=t,i.payload=this.payload.length,l.push(i)}if(u){let{name:r,duration:s}=u,i=new o(r,s);i.msgs=this.msgs,i.bytes=h.inBytes,i.lang=e,i.version=t,i.payload=this.payload.length,l.push(i)}if(a){let{name:r,duration:s}=a,i=new o(r,s);i.msgs=this.msgs,i.bytes=h.inBytes+h.outBytes,i.lang=e,i.version=t,i.payload=this.payload.length,l.push(i)}if(n){let{name:r,duration:s}=n,i=new o(r,s);i.msgs=this.msgs,i.bytes=h.inBytes+h.outBytes,i.lang=e,i.version=t,i.payload=this.payload.length,l.push(i)}return l}async runCallbacks(){let e=[];if(this.sub){let t=(0,n.deferred)();e.push(t);let r=0;this.nc.subscribe(this.subject,{max:this.msgs,callback:()=>{1==++r&&this.perf.mark("subStart"),r===this.msgs&&(this.perf.mark("subStop"),this.perf.measure("sub","subStart","subStop"),t.resolve())}})}if(this.rep){let t=(0,n.deferred)();e.push(t);let r=0;this.nc.subscribe(this.subject,{max:this.msgs,callback:(e,s)=>{s.respond(this.payload),1==++r&&this.perf.mark("repStart"),r===this.msgs&&(this.perf.mark("repStop"),this.perf.measure("rep","repStart","repStop"),t.resolve())}})}if(this.pub){let t=(async()=>{this.perf.mark("pubStart");for(let e=0;e<this.msgs;e++)this.nc.publish(this.subject,this.payload);await this.nc.flush(),this.perf.mark("pubStop"),this.perf.measure("pub","pubStart","pubStop")})();e.push(t)}if(this.req){let t=(async()=>{if(this.asyncRequests){this.perf.mark("reqStart");let e=[];for(let t=0;t<this.msgs;t++)e.push(this.nc.request(this.subject,this.payload,{timeout:2e4}));await Promise.all(e),this.perf.mark("reqStop"),this.perf.measure("req","reqStart","reqStop")}else{this.perf.mark("reqStart");for(let e=0;e<this.msgs;e++)await this.nc.request(this.subject);this.perf.mark("reqStop"),this.perf.measure("req","reqStart","reqStop")}})();e.push(t)}await Promise.all(e)}async runAsync(){let e=[];if(this.rep){let t=!1,r=this.nc.subscribe(this.subject,{max:this.msgs}),s=(async()=>{for await(let e of r)t||(this.perf.mark("repStart"),t=!0),e.respond(this.payload);await this.nc.flush(),this.perf.mark("repStop"),this.perf.measure("rep","repStart","repStop")})();e.push(s)}if(this.sub){let t=!1,r=this.nc.subscribe(this.subject,{max:this.msgs}),s=(async()=>{for await(let e of r)t||(this.perf.mark("subStart"),t=!0);this.perf.mark("subStop"),this.perf.measure("sub","subStart","subStop")})();e.push(s)}if(this.pub){let t=(async()=>{this.perf.mark("pubStart");for(let e=0;e<this.msgs;e++)this.nc.publish(this.subject,this.payload);await this.nc.flush(),this.perf.mark("pubStop"),this.perf.measure("pub","pubStart","pubStop")})();e.push(t)}if(this.req){let t=(async()=>{if(this.asyncRequests){this.perf.mark("reqStart");let e=[];for(let t=0;t<this.msgs;t++)e.push(this.nc.request(this.subject,this.payload,{timeout:2e4}));await Promise.all(e),this.perf.mark("reqStop"),this.perf.measure("req","reqStart","reqStop")}else{this.perf.mark("reqStart");for(let e=0;e<this.msgs;e++)await this.nc.request(this.subject);this.perf.mark("reqStop"),this.perf.measure("req","reqStart","reqStop")}})();e.push(t)}await Promise.all(e)}}function c(e,t){return`${u(e/t)}/sec`}function u(e,t=!1){let r=t?1e3:1024,s=t?"iB":"B";if(e<r)return`${e.toFixed(2)} ${s}`;let i=parseInt(Math.log(e)/Math.log(r)+""),n=parseInt(i-1+"");return`${(e/Math.pow(r,i)).toFixed(2)} ${(t?["k","M","G","T","P","E"]:["K","M","G","T","P","E"])[n]}${s}`}t.Bench=a},4320:(e,t,r)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HOST=t.DEFAULT_PORT=t.Match=void 0,t.syncIterator=function(e){let t=e[Symbol.asyncIterator]();return{async next(){let e=await t.next();return e.done?Promise.resolve(null):Promise.resolve(e.value)}}},t.createInbox=function(e=""){if("string"!=typeof(e=e||"_INBOX"))throw TypeError("prefix must be a string");return e.split(".").forEach(t=>{if("*"===t||">"===t)throw n.InvalidArgumentError.format("prefix",`cannot have wildcards ('${e}')`)}),`${e}.${i.nuid.next()}`};let i=r(4723),n=r(6008);!function(e){e[e.Exact=0]="Exact",e[e.CanonicalMIME=1]="CanonicalMIME",e[e.IgnoreCase=2]="IgnoreCase"}(s||(t.Match=s={})),t.DEFAULT_PORT=4222,t.DEFAULT_HOST="127.0.0.1"},7721:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataBuffer=void 0;let s=r(1634);class i{buffers;byteLength;constructor(){this.buffers=[],this.byteLength=0}static concat(...e){let t=0;for(let r=0;r<e.length;r++)t+=e[r].length;let r=new Uint8Array(t),s=0;for(let t=0;t<e.length;t++)r.set(e[t],s),s+=e[t].length;return r}static fromAscii(e){return e||(e=""),s.TE.encode(e)}static toAscii(e){return s.TD.decode(e)}reset(){this.buffers.length=0,this.byteLength=0}pack(){if(this.buffers.length>1){let e=new Uint8Array(this.byteLength),t=0;for(let r=0;r<this.buffers.length;r++)e.set(this.buffers[r],t),t+=this.buffers[r].length;this.buffers.length=0,this.buffers.push(e)}}shift(){if(this.buffers.length){let e=this.buffers.shift();if(e)return this.byteLength-=e.length,e}return new Uint8Array(0)}drain(e){if(this.buffers.length){this.pack();let t=this.buffers.pop();if(t){let r=this.byteLength;(void 0===e||e>r)&&(e=r);let s=t.subarray(0,e);return r>e&&this.buffers.push(t.subarray(e)),this.byteLength=r-e,s}}return new Uint8Array(0)}fill(e,...t){e&&(this.buffers.push(e),this.byteLength+=e.length);for(let e=0;e<t.length;e++)t[e]&&t[e].length&&(this.buffers.push(t[e]),this.byteLength+=t[e].length)}peek(){return this.buffers.length?(this.pack(),this.buffers[0]):new Uint8Array(0)}size(){return this.byteLength}length(){return this.buffers.length}}t.DataBuffer=i},381:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DenoBuffer=t.MAX_SIZE=t.AssertionError=void 0,t.assert=n,t.concat=a,t.append=function(e,t){return a(e,Uint8Array.of(t))},t.readAll=function(e){let t=new c;return t.readFrom(e),t.bytes()},t.writeAll=function(e,t){let r=0;for(;r<t.length;)r+=e.write(t.subarray(r))};let s=r(1634);class i extends Error{constructor(e){super(e),this.name="AssertionError"}}function n(e,t="Assertion failed."){if(!e)throw new i(t)}function o(e,t,r=0){let s=t.byteLength-r;return e.byteLength>s&&(e=e.subarray(0,s)),t.set(e,r),e.byteLength}function a(e,t){if(void 0===e&&void 0===t)return new Uint8Array(0);if(void 0===e)return t;if(void 0===t)return e;let r=new Uint8Array(e.length+t.length);return r.set(e,0),r.set(t,e.length),r}t.AssertionError=i,t.MAX_SIZE=0x100000000-2;class c{_buf;_off;constructor(e){if(this._off=0,null==e){this._buf=new Uint8Array(0);return}this._buf=new Uint8Array(e)}bytes(e={copy:!0}){return!1===e.copy?this._buf.subarray(this._off):this._buf.slice(this._off)}empty(){return this._buf.byteLength<=this._off}get length(){return this._buf.byteLength-this._off}get capacity(){return this._buf.buffer.byteLength}truncate(e){if(0===e){this.reset();return}if(e<0||e>this.length)throw Error("bytes.Buffer: truncation out of range");this._reslice(this._off+e)}reset(){this._reslice(0),this._off=0}_tryGrowByReslice(e){let t=this._buf.byteLength;return e<=this.capacity-t?(this._reslice(t+e),t):-1}_reslice(e){n(e<=this._buf.buffer.byteLength),this._buf=new Uint8Array(this._buf.buffer,0,e)}readByte(){let e=new Uint8Array(1);return this.read(e)?e[0]:null}read(e){if(this.empty())return(this.reset(),0===e.byteLength)?0:null;let t=o(this._buf.subarray(this._off),e);return this._off+=t,t}writeByte(e){return this.write(Uint8Array.of(e))}writeString(e){return this.write(s.TE.encode(e))}write(e){let t=this._grow(e.byteLength);return o(e,this._buf,t)}_grow(e){let r=this.length;0===r&&0!==this._off&&this.reset();let s=this._tryGrowByReslice(e);if(s>=0)return s;let i=this.capacity;if(e<=Math.floor(i/2)-r)o(this._buf.subarray(this._off),this._buf);else if(i+e>t.MAX_SIZE)throw Error("The buffer cannot be grown beyond the maximum size.");else{let r=new Uint8Array(Math.min(2*i+e,t.MAX_SIZE));o(this._buf.subarray(this._off),r),this._buf=r}return this._off=0,this._reslice(Math.min(r+e,t.MAX_SIZE)),r}grow(e){if(e<0)throw Error("Buffer._grow: negative count");let t=this._grow(e);this._reslice(t)}readFrom(e){let t=0,r=new Uint8Array(32768);for(;;){let s=this.capacity-this.length<32768,i=s?r:new Uint8Array(this._buf.buffer,this.length),n=e.read(i);if(null===n)return t;s?this.write(i.subarray(0,n)):this._reslice(this.length+n),t+=n}}}t.DenoBuffer=c},1634:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TD=t.TE=t.Empty=void 0,t.encode=function(...e){let r=[];for(let s=0;s<e.length;s++)r.push(t.TE.encode(e[s]));return 0===r.length?t.Empty:1===r.length?r[0]:function(...e){let t=0;for(let r=0;r<e.length;r++)t+=e[r].length;let r=new Uint8Array(t),s=0;for(let t=0;t<e.length;t++)r.set(e[t],s),s+=e[t].length;return r}(...r)},t.decode=function(e){return e&&0!==e.length?t.TD.decode(e):""},t.Empty=new Uint8Array(0),t.TE=new TextEncoder,t.TD=new TextDecoder},6008:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errors=t.PermissionViolationError=t.NoRespondersError=t.TimeoutError=t.RequestError=t.ProtocolError=t.ConnectionError=t.DrainingConnectionError=t.ClosedConnectionError=t.AuthorizationError=t.UserAuthenticationExpiredError=t.InvalidOperationError=t.InvalidArgumentError=t.InvalidSubjectError=void 0;class r extends Error{constructor(e,t){super(`illegal subject: '${e}'`,t),this.name="InvalidSubjectError"}}t.InvalidSubjectError=r;class s extends Error{constructor(e,t){super(e,t),this.name="InvalidArgumentError"}static format(e,t,r){return Array.isArray(t)&&t.length>1&&(t=t[0]),e=Array.isArray(e)?(e=e.map(e=>`'${e}'`)).join(","):`'${e}'`,new s(`${e} ${t}`,r)}}t.InvalidArgumentError=s;class i extends Error{constructor(e,t){super(e,t),this.name="InvalidOperationError"}}t.InvalidOperationError=i;class n extends Error{constructor(e,t){super(e,t),this.name="UserAuthenticationExpiredError"}static parse(e){return -1!==e.toLowerCase().indexOf("user authentication expired")?new n(e):null}}t.UserAuthenticationExpiredError=n;class o extends Error{constructor(e,t){super(e,t),this.name="AuthorizationError"}static parse(e){let t=["authorization violation","account authentication expired","authentication timeout"],r=e.toLowerCase();for(let s=0;s<t.length;s++)if(-1!==r.indexOf(t[s]))return new o(e);return null}}t.AuthorizationError=o;class a extends Error{constructor(){super("closed connection"),this.name="ClosedConnectionError"}}t.ClosedConnectionError=a;class c extends Error{constructor(){super("connection draining"),this.name="DrainingConnectionError"}}t.DrainingConnectionError=c;class u extends Error{constructor(e,t){super(e,t),this.name="ConnectionError"}}t.ConnectionError=u;class h extends Error{constructor(e,t){super(e,t),this.name="ProtocolError"}}t.ProtocolError=h;class l extends Error{constructor(e="",t){super(e,t),this.name="RequestError"}isNoResponders(){return this.cause instanceof f}}t.RequestError=l;class d extends Error{constructor(e){super("timeout",e),this.name="TimeoutError"}}t.TimeoutError=d;class f extends Error{subject;constructor(e,t){super(`no responders: '${e}'`,t),this.subject=e,this.name="NoResponders"}}t.NoRespondersError=f;class p extends Error{operation;subject;queue;constructor(e,t,r,s,i){super(e,i),this.name="PermissionViolationError",this.operation=t,this.subject=r,this.queue=s}static parse(e){let t;if(-1===(e?e.toLowerCase():"").indexOf("permissions violation"))return null;let r="publish",s="",i=e.match(/(Publish|Subscription) to "(\S+)"/);if(i&&(r=i[1].toLowerCase(),s=i[2],"subscription"===r)){let r=e.match(/using queue "(\S+)"/);r&&(t=r[1])}return new p(e,r,s,t)}}t.PermissionViolationError=p,t.errors={AuthorizationError:o,ClosedConnectionError:a,ConnectionError:u,DrainingConnectionError:c,InvalidArgumentError:s,InvalidOperationError:i,InvalidSubjectError:r,NoRespondersError:f,PermissionViolationError:p,ProtocolError:h,RequestError:l,TimeoutError:d,UserAuthenticationExpiredError:n}},2587:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsgHdrsImpl=void 0,t.canonicalMIMEHeaderKey=o,t.headers=function(e=0,t=""){if(0===e&&""!==t||e>0&&""===t)throw n.InvalidArgumentError.format("description","is required");return new c(e,t)};let s=r(1634),i=r(4320),n=r(6008);function o(e){let t=!0,r=Array(e.length);for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);if(58===i||i<33||i>126)throw n.InvalidArgumentError.format("header",`'${e[s]}' is not a valid character in a header name`);t&&97<=i&&i<=122?i-=32:!t&&65<=i&&i<=90&&(i+=32),r[s]=i,t=45==i}return String.fromCharCode(...r)}let a="NATS/1.0";class c{_code;headers;_description;constructor(e=0,t=""){this._code=e,this._description=t,this.headers=new Map}[Symbol.iterator](){return this.headers.entries()}size(){return this.headers.size}equals(e){if(e&&this.headers.size===e.headers.size&&this._code===e._code){for(let[t,r]of this.headers){let s=e.values(t);if(r.length!==s.length)return!1;let i=[...r].sort(),n=[...s].sort();for(let e=0;e<i.length;e++)if(i[e]!==n[e])return!1}return!0}return!1}static decode(e){let t=new c,r=s.TD.decode(e).split("\r\n"),i=r[0];if(i!==a){let e=i.replace(a,"").trim();if(e.length>0){t._code=parseInt(e,10),isNaN(t._code)&&(t._code=0);let r=t._code.toString();e=e.replace(r,""),t._description=e.trim()}}return r.length>=1&&r.slice(1).map(e=>{if(e){let r=e.indexOf(":");if(r>-1){let s=e.slice(0,r),i=e.slice(r+1).trim();t.append(s,i)}}}),t}toString(){if(0===this.headers.size&&0===this._code)return"";let e=a;for(let[t,r]of(this._code>0&&""!==this._description&&(e+=` ${this._code} ${this._description}`),this.headers))for(let s=0;s<r.length;s++)e=`${e}\r
${t}: ${r[s]}`;return`${e}\r
\r
`}encode(){return s.TE.encode(this.toString())}static validHeaderValue(e){if(/[\r\n]/.test(e))throw n.InvalidArgumentError.format("header","values cannot contain \\r or \\n");return e.trim()}keys(){let e=[];for(let t of this.headers.keys())e.push(t);return e}findKeys(e,t=i.Match.Exact){let r=this.keys();switch(t){case i.Match.Exact:return r.filter(t=>t===e);case i.Match.CanonicalMIME:return e=o(e),r.filter(t=>t===e);default:{let t=e.toLowerCase();return r.filter(e=>t===e.toLowerCase())}}}get(e,t=i.Match.Exact){let r=this.findKeys(e,t);if(r.length){let e=this.headers.get(r[0]);if(e)return Array.isArray(e)?e[0]:e}return""}last(e,t=i.Match.Exact){let r=this.findKeys(e,t);if(r.length){let e=this.headers.get(r[0]);if(e)return Array.isArray(e)?e[e.length-1]:e}return""}has(e,t=i.Match.Exact){return this.findKeys(e,t).length>0}set(e,t,r=i.Match.Exact){this.delete(e,r),this.append(e,t,r)}append(e,t,r=i.Match.Exact){let s=o(e);r===i.Match.CanonicalMIME&&(e=s);let n=this.findKeys(e,r);e=n.length>0?n[0]:e;let a=c.validHeaderValue(t),u=this.headers.get(e);u||(u=[],this.headers.set(e,u)),u.push(a)}values(e,t=i.Match.Exact){let r=[];return this.findKeys(e,t).forEach(e=>{let t=this.headers.get(e);t&&r.push(...t)}),r}delete(e,t=i.Match.Exact){this.findKeys(e,t).forEach(e=>{this.headers.delete(e)})}get hasError(){return this._code>=300}get status(){return`${this._code} ${this._description}`.trim()}toRecord(){let e={};return this.keys().forEach(t=>{e[t]=this.values(t)}),e}get code(){return this._code}get description(){return this._description}static fromRecord(e){let t=new c;for(let r in e)t.headers.set(r,e[r]);return t}}t.MsgHdrsImpl=c},6442:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Heartbeat=void 0;let s=r(4731);class i{ph;interval;maxOut;timer;pendings;constructor(e,t,r){this.ph=e,this.interval=t,this.maxOut=r,this.pendings=[]}start(){this.cancel(),this._schedule()}cancel(e){this.timer&&(clearTimeout(this.timer),this.timer=void 0),this._reset(),e&&this.ph.disconnect()}_schedule(){this.timer=setTimeout(()=>{if(this.ph.dispatchStatus({type:"ping",pendingPings:this.pendings.length+1}),this.pendings.length===this.maxOut){this.cancel(!0);return}let e=(0,s.deferred)();this.ph.flush(e).then(()=>{this._reset()}).catch(()=>{this.cancel()}),this.pendings.push(e),this._schedule()},this.interval)}_reset(){this.pendings=this.pendings.filter(e=>(e.resolve(),!1))}}t.Heartbeat=i},1322:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdleHeartbeatMonitor=void 0;class r{interval;maxOut;cancelAfter;timer;autoCancelTimer;last;missed;count;callback;constructor(e,t,r={maxOut:2}){this.interval=e,this.maxOut=r?.maxOut||2,this.cancelAfter=r?.cancelAfter||0,this.last=Date.now(),this.missed=0,this.count=0,this.callback=t,this._schedule()}cancel(){this.autoCancelTimer&&clearTimeout(this.autoCancelTimer),this.timer&&clearInterval(this.timer),this.timer=0,this.autoCancelTimer=0,this.missed=0}work(){this.last=Date.now(),this.missed=0}_change(e,t=0,r=2){this.interval=e,this.maxOut=r,this.cancelAfter=t,this.restart()}restart(){this.cancel(),this._schedule()}_schedule(){this.cancelAfter>0&&(this.autoCancelTimer=setTimeout(()=>{this.cancel()},this.cancelAfter)),this.timer=setInterval(()=>{if(this.count++,Date.now()-this.last>this.interval&&this.missed++,this.missed>=this.maxOut)try{!0===this.callback(this.missed)&&this.cancel()}catch(e){console.log(e)}},this.interval)}}t.IdleHeartbeatMonitor=r},5545:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,i)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.TD=t.Metric=t.Bench=t.writeAll=t.readAll=t.MAX_SIZE=t.DenoBuffer=t.State=t.Parser=t.Kind=t.QueuedIteratorImpl=t.usernamePasswordAuthenticator=t.tokenAuthenticator=t.nkeyAuthenticator=t.jwtAuthenticator=t.credsAuthenticator=t.RequestOne=t.parseOptions=t.hasWsProtocol=t.defaultOptions=t.DEFAULT_MAX_RECONNECT_ATTEMPTS=t.checkUnsupportedOption=t.checkOptions=t.buildAuthenticator=t.DataBuffer=t.MuxSubscription=t.Heartbeat=t.MsgHdrsImpl=t.headers=t.canonicalMIMEHeaderKey=t.timeout=t.SimpleMutex=t.render=t.nanos=t.millis=t.extend=t.delay=t.deferred=t.deadline=t.collect=t.backoff=t.ProtocolHandler=t.INFO=t.Connect=t.setTransportFactory=t.getResolveFn=t.MsgImpl=t.nuid=t.Nuid=t.NatsConnectionImpl=void 0,t.UserAuthenticationExpiredError=t.TimeoutError=t.RequestError=t.ProtocolError=t.PermissionViolationError=t.NoRespondersError=t.InvalidSubjectError=t.InvalidOperationError=t.InvalidArgumentError=t.errors=t.DrainingConnectionError=t.ConnectionError=t.ClosedConnectionError=t.AuthorizationError=t.wsUrlParseFn=t.wsconnect=t.Servers=t.isIPV4OrHostname=t.IdleHeartbeatMonitor=t.Subscriptions=t.SubscriptionImpl=t.syncIterator=t.Match=t.createInbox=t.protoLen=t.extractProtocolMessage=t.Empty=t.parseSemVer=t.Features=t.Feature=t.compare=t.parseIP=t.isIP=t.ipV4=t.TE=void 0;var n=r(807);Object.defineProperty(t,"NatsConnectionImpl",{enumerable:!0,get:function(){return n.NatsConnectionImpl}});var o=r(4723);Object.defineProperty(t,"Nuid",{enumerable:!0,get:function(){return o.Nuid}}),Object.defineProperty(t,"nuid",{enumerable:!0,get:function(){return o.nuid}});var a=r(268);Object.defineProperty(t,"MsgImpl",{enumerable:!0,get:function(){return a.MsgImpl}});var c=r(8700);Object.defineProperty(t,"getResolveFn",{enumerable:!0,get:function(){return c.getResolveFn}}),Object.defineProperty(t,"setTransportFactory",{enumerable:!0,get:function(){return c.setTransportFactory}});var u=r(8159);Object.defineProperty(t,"Connect",{enumerable:!0,get:function(){return u.Connect}}),Object.defineProperty(t,"INFO",{enumerable:!0,get:function(){return u.INFO}}),Object.defineProperty(t,"ProtocolHandler",{enumerable:!0,get:function(){return u.ProtocolHandler}});var h=r(4731);Object.defineProperty(t,"backoff",{enumerable:!0,get:function(){return h.backoff}}),Object.defineProperty(t,"collect",{enumerable:!0,get:function(){return h.collect}}),Object.defineProperty(t,"deadline",{enumerable:!0,get:function(){return h.deadline}}),Object.defineProperty(t,"deferred",{enumerable:!0,get:function(){return h.deferred}}),Object.defineProperty(t,"delay",{enumerable:!0,get:function(){return h.delay}}),Object.defineProperty(t,"extend",{enumerable:!0,get:function(){return h.extend}}),Object.defineProperty(t,"millis",{enumerable:!0,get:function(){return h.millis}}),Object.defineProperty(t,"nanos",{enumerable:!0,get:function(){return h.nanos}}),Object.defineProperty(t,"render",{enumerable:!0,get:function(){return h.render}}),Object.defineProperty(t,"SimpleMutex",{enumerable:!0,get:function(){return h.SimpleMutex}}),Object.defineProperty(t,"timeout",{enumerable:!0,get:function(){return h.timeout}});var l=r(2587);Object.defineProperty(t,"canonicalMIMEHeaderKey",{enumerable:!0,get:function(){return l.canonicalMIMEHeaderKey}}),Object.defineProperty(t,"headers",{enumerable:!0,get:function(){return l.headers}}),Object.defineProperty(t,"MsgHdrsImpl",{enumerable:!0,get:function(){return l.MsgHdrsImpl}});var d=r(6442);Object.defineProperty(t,"Heartbeat",{enumerable:!0,get:function(){return d.Heartbeat}});var f=r(1434);Object.defineProperty(t,"MuxSubscription",{enumerable:!0,get:function(){return f.MuxSubscription}});var p=r(7721);Object.defineProperty(t,"DataBuffer",{enumerable:!0,get:function(){return p.DataBuffer}});var b=r(911);Object.defineProperty(t,"buildAuthenticator",{enumerable:!0,get:function(){return b.buildAuthenticator}}),Object.defineProperty(t,"checkOptions",{enumerable:!0,get:function(){return b.checkOptions}}),Object.defineProperty(t,"checkUnsupportedOption",{enumerable:!0,get:function(){return b.checkUnsupportedOption}}),Object.defineProperty(t,"DEFAULT_MAX_RECONNECT_ATTEMPTS",{enumerable:!0,get:function(){return b.DEFAULT_MAX_RECONNECT_ATTEMPTS}}),Object.defineProperty(t,"defaultOptions",{enumerable:!0,get:function(){return b.defaultOptions}}),Object.defineProperty(t,"hasWsProtocol",{enumerable:!0,get:function(){return b.hasWsProtocol}}),Object.defineProperty(t,"parseOptions",{enumerable:!0,get:function(){return b.parseOptions}});var y=r(9148);Object.defineProperty(t,"RequestOne",{enumerable:!0,get:function(){return y.RequestOne}});var g=r(2798);Object.defineProperty(t,"credsAuthenticator",{enumerable:!0,get:function(){return g.credsAuthenticator}}),Object.defineProperty(t,"jwtAuthenticator",{enumerable:!0,get:function(){return g.jwtAuthenticator}}),Object.defineProperty(t,"nkeyAuthenticator",{enumerable:!0,get:function(){return g.nkeyAuthenticator}}),Object.defineProperty(t,"tokenAuthenticator",{enumerable:!0,get:function(){return g.tokenAuthenticator}}),Object.defineProperty(t,"usernamePasswordAuthenticator",{enumerable:!0,get:function(){return g.usernamePasswordAuthenticator}}),i(r(3267),t);var m=r(9481);Object.defineProperty(t,"QueuedIteratorImpl",{enumerable:!0,get:function(){return m.QueuedIteratorImpl}});var _=r(6100);Object.defineProperty(t,"Kind",{enumerable:!0,get:function(){return _.Kind}}),Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return _.Parser}}),Object.defineProperty(t,"State",{enumerable:!0,get:function(){return _.State}});var v=r(381);Object.defineProperty(t,"DenoBuffer",{enumerable:!0,get:function(){return v.DenoBuffer}}),Object.defineProperty(t,"MAX_SIZE",{enumerable:!0,get:function(){return v.MAX_SIZE}}),Object.defineProperty(t,"readAll",{enumerable:!0,get:function(){return v.readAll}}),Object.defineProperty(t,"writeAll",{enumerable:!0,get:function(){return v.writeAll}});var P=r(8843);Object.defineProperty(t,"Bench",{enumerable:!0,get:function(){return P.Bench}}),Object.defineProperty(t,"Metric",{enumerable:!0,get:function(){return P.Metric}});var E=r(1634);Object.defineProperty(t,"TD",{enumerable:!0,get:function(){return E.TD}}),Object.defineProperty(t,"TE",{enumerable:!0,get:function(){return E.TE}});var w=r(2377);Object.defineProperty(t,"ipV4",{enumerable:!0,get:function(){return w.ipV4}}),Object.defineProperty(t,"isIP",{enumerable:!0,get:function(){return w.isIP}}),Object.defineProperty(t,"parseIP",{enumerable:!0,get:function(){return w.parseIP}});var O=r(5991);Object.defineProperty(t,"compare",{enumerable:!0,get:function(){return O.compare}}),Object.defineProperty(t,"Feature",{enumerable:!0,get:function(){return O.Feature}}),Object.defineProperty(t,"Features",{enumerable:!0,get:function(){return O.Features}}),Object.defineProperty(t,"parseSemVer",{enumerable:!0,get:function(){return O.parseSemVer}});var S=r(2724);Object.defineProperty(t,"Empty",{enumerable:!0,get:function(){return S.Empty}});var x=r(8700);Object.defineProperty(t,"extractProtocolMessage",{enumerable:!0,get:function(){return x.extractProtocolMessage}}),Object.defineProperty(t,"protoLen",{enumerable:!0,get:function(){return x.protoLen}});var A=r(4320);Object.defineProperty(t,"createInbox",{enumerable:!0,get:function(){return A.createInbox}}),Object.defineProperty(t,"Match",{enumerable:!0,get:function(){return A.Match}}),Object.defineProperty(t,"syncIterator",{enumerable:!0,get:function(){return A.syncIterator}});var C=r(8159);Object.defineProperty(t,"SubscriptionImpl",{enumerable:!0,get:function(){return C.SubscriptionImpl}}),Object.defineProperty(t,"Subscriptions",{enumerable:!0,get:function(){return C.Subscriptions}});var M=r(1322);Object.defineProperty(t,"IdleHeartbeatMonitor",{enumerable:!0,get:function(){return M.IdleHeartbeatMonitor}});var I=r(5121);Object.defineProperty(t,"isIPV4OrHostname",{enumerable:!0,get:function(){return I.isIPV4OrHostname}}),Object.defineProperty(t,"Servers",{enumerable:!0,get:function(){return I.Servers}});var N=r(7695);Object.defineProperty(t,"wsconnect",{enumerable:!0,get:function(){return N.wsconnect}}),Object.defineProperty(t,"wsUrlParseFn",{enumerable:!0,get:function(){return N.wsUrlParseFn}});var k=r(6008);Object.defineProperty(t,"AuthorizationError",{enumerable:!0,get:function(){return k.AuthorizationError}}),Object.defineProperty(t,"ClosedConnectionError",{enumerable:!0,get:function(){return k.ClosedConnectionError}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return k.ConnectionError}}),Object.defineProperty(t,"DrainingConnectionError",{enumerable:!0,get:function(){return k.DrainingConnectionError}}),Object.defineProperty(t,"errors",{enumerable:!0,get:function(){return k.errors}}),Object.defineProperty(t,"InvalidArgumentError",{enumerable:!0,get:function(){return k.InvalidArgumentError}}),Object.defineProperty(t,"InvalidOperationError",{enumerable:!0,get:function(){return k.InvalidOperationError}}),Object.defineProperty(t,"InvalidSubjectError",{enumerable:!0,get:function(){return k.InvalidSubjectError}}),Object.defineProperty(t,"NoRespondersError",{enumerable:!0,get:function(){return k.NoRespondersError}}),Object.defineProperty(t,"PermissionViolationError",{enumerable:!0,get:function(){return k.PermissionViolationError}}),Object.defineProperty(t,"ProtocolError",{enumerable:!0,get:function(){return k.ProtocolError}}),Object.defineProperty(t,"RequestError",{enumerable:!0,get:function(){return k.RequestError}}),Object.defineProperty(t,"TimeoutError",{enumerable:!0,get:function(){return k.TimeoutError}}),Object.defineProperty(t,"UserAuthenticationExpiredError",{enumerable:!0,get:function(){return k.UserAuthenticationExpiredError}})},2377:(e,t)=>{"use strict";function r(e,t,r,s){let i=new Uint8Array(16);return[0,0,0,0,0,0,0,0,0,0,255,255].forEach((e,t)=>{i[t]=e}),i[12]=e,i[13]=t,i[14]=r,i[15]=s,i}function s(e){for(let t=0;t<e.length;t++)switch(e[t]){case".":return i(e);case":":return function(e){let t=new Uint8Array(16),r=-1;if(e.length>=2&&":"===e[0]&&":"===e[1]&&(r=0,0===(e=e.substring(2)).length))return t;let s=0;for(;s<16;){let{n,c:o,ok:a}=function(e){let t=0,r=0;for(r=0;r<e.length;r++){if(48<=e.charCodeAt(r)&&57>=e.charCodeAt(r))t*=16,t+=e.charCodeAt(r)-48;else if(97<=e.charCodeAt(r)&&102>=e.charCodeAt(r))t*=16,t+=e.charCodeAt(r)-97+10;else if(65<=e.charCodeAt(r)&&70>=e.charCodeAt(r))t*=16,t+=e.charCodeAt(r)-65+10;else break;if(t>=0xffffff)return{n:0,c:r,ok:!1}}return 0===r?{n:0,c:r,ok:!1}:{n:t,c:r,ok:!0}}(e);if(!a||n>65535)return;if(o<e.length&&"."===e[o]){if(r<0&&12!=s||s+4>16)return;let n=i(e);if(void 0===n)return;t[s]=n[12],t[s+1]=n[13],t[s+2]=n[14],t[s+3]=n[15],e="",s+=4;break}if(t[s]=n>>8,t[s+1]=n,s+=2,0===(e=e.substring(o)).length)break;if(":"!==e[0]||1==e.length)return;if(":"===(e=e.substring(1))[0]){if(r>=0)return;if(r=s,0===(e=e.substring(1)).length)break}}if(0===e.length){if(s<16){if(r<0)return;let e=16-s;for(let i=s-1;i>=r;i--)t[i+e]=t[i];for(let s=r+e-1;s>=r;s--)t[s]=0}else if(r>=0)return;return t}}(e)}}function i(e){let t=new Uint8Array(4);for(let r=0;r<4;r++){if(0===e.length)return;if(r>0){if("."!==e[0])return;e=e.substring(1)}let{n:s,c:i,ok:n}=function(e){let t=0,r=0;for(t=0;t<e.length&&48<=e.charCodeAt(t)&&57>=e.charCodeAt(t);t++)if((r=10*r+(e.charCodeAt(t)-48))>=0xffffff)return{n:0xffffff,c:t,ok:!1};return 0===t?{n:0,c:0,ok:!1}:{n:r,c:t,ok:!0}}(e);if(!n||s>255)return;e=e.substring(i),t[r]=s}return r(t[0],t[1],t[2],t[3])}Object.defineProperty(t,"__esModule",{value:!0}),t.ipV4=r,t.isIP=function(e){return void 0!==s(e)},t.parseIP=s},5617:(e,t,r)=>{"use strict";t.hd=void 0;var s=r(5545);Object.defineProperty(t,"hd",{enumerable:!0,get:function(){return s.wsconnect}})},268:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsgImpl=void 0;let s=r(2587),i=r(1634);class n{_headers;_msg;_rdata;_reply;_subject;publisher;constructor(e,t,r){this._msg=e,this._rdata=t,this.publisher=r}get subject(){return this._subject||(this._subject=i.TD.decode(this._msg.subject)),this._subject}get reply(){return this._reply||(this._reply=i.TD.decode(this._msg.reply)),this._reply}get sid(){return this._msg.sid}get headers(){if(this._msg.hdr>-1&&!this._headers){let e=this._rdata.subarray(0,this._msg.hdr);this._headers=s.MsgHdrsImpl.decode(e)}return this._headers}get data(){return this._rdata?this._msg.hdr>-1?this._rdata.subarray(this._msg.hdr):this._rdata:new Uint8Array(0)}respond(e=i.Empty,t){return!!this.reply&&(this.publisher.publish(this.reply,e,t),!0)}size(){return this._msg.subject.length+(this._msg.reply?.length||0)+(-1===this._msg.size?0:this._msg.size)}json(e){return JSON.parse(this.string(),e)}string(){return i.TD.decode(this.data)}requestInfo(){let e=this.headers?.get("Nats-Request-Info");return e?JSON.parse(e,function(e,t){return("start"===e||"stop"===e)&&""!==t?new Date(Date.parse(t)):t}):null}}t.MsgImpl=n},1434:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MuxSubscription=void 0;let s=r(4320),i=r(6008);class n{baseInbox;reqs;constructor(){this.reqs=new Map}size(){return this.reqs.size}init(e){return this.baseInbox=`${(0,s.createInbox)(e)}.`,this.baseInbox}add(e){isNaN(e.received)||(e.received=0),this.reqs.set(e.token,e)}get(e){return this.reqs.get(e)}cancel(e){this.reqs.delete(e.token)}getToken(e){let t=e.subject||"";return 0===t.indexOf(this.baseInbox)?t.substring(this.baseInbox.length):null}all(){return Array.from(this.reqs.values())}handleError(e,t){if(e)return this.all().forEach(e=>{e.resolver(t,{})}),!0;if("publish"===t.operation){let e=this.all().find(e=>e.requestSubject===t.subject);if(e)return e.resolver(t,{}),!0}return!1}dispatcher(){return(e,t)=>{let r=this.getToken(t);if(r){let s=this.get(r);s&&(null===e&&(e=t?.data?.length===0&&t.headers?.code===503?new i.NoRespondersError(s.requestSubject):null),s.resolver(e,t))}}}close(){let e=new i.RequestError("connection closed");this.reqs.forEach(t=>{t.resolver(e,{})})}}t.MuxSubscription=n},807:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NatsConnectionImpl=void 0;let s=r(4731),i=r(8159),n=r(1634),o=r(5991),a=r(911),c=r(9481),u=r(9148),h=r(4320),l=r(6008);class d{options;protocol;draining;constructor(e){this.draining=!1,this.options=(0,a.parseOptions)(e)}static connect(e={}){return new Promise((t,r)=>{let s=new d(e);i.ProtocolHandler.connect(s.options,s).then(e=>{s.protocol=e,t(s)}).catch(e=>{r(e)})})}closed(){return this.protocol.closed}async close(){await this.protocol.close()}_check(e,t,r){if(this.isClosed())throw new l.errors.ClosedConnectionError;if(t&&this.isDraining()||r&&this.protocol.noMorePublishing)throw new l.errors.DrainingConnectionError;if(0===(e=e||"").length)throw new l.errors.InvalidSubjectError(e)}publish(e,t,r){this._check(e,!1,!0),r?.reply&&this._check(r.reply,!1,!0),this.protocol.publish(e,t,r)}publishMessage(e){return this.publish(e.subject,e.data,{reply:e.reply,headers:e.headers})}respondMessage(e){return!!e.reply&&(this.publish(e.reply,e.data,{reply:e.reply,headers:e.headers}),!0)}subscribe(e,t={}){this._check(e,!0,!1);let r=new i.SubscriptionImpl(this.protocol,e,t);return"function"!=typeof t.callback&&"number"==typeof t.slow&&r.setSlowNotificationFn(t.slow,e=>{this.protocol.dispatchStatus({type:"slowConsumer",sub:r,pending:e})}),this.protocol.subscribe(r),r}_resub(e,t,r){this._check(t,!0,!1),e.max=r,r&&(e.max=r+e.received),this.protocol.resub(e,t)}requestMany(e,t=n.Empty,r={maxWait:1e3,maxMessages:-1}){let s=!this.protocol.options.noAsyncTraces;try{this._check(e,!0,!0)}catch(e){return Promise.reject(e)}if(r.strategy=r.strategy||"timer",r.maxWait=r.maxWait||1e3,r.maxWait<1)return Promise.reject(l.InvalidArgumentError.format("timeout","must be greater than 0"));let i=new c.QueuedIteratorImpl;function o(e){i.push(()=>{i.stop(e)})}function a(e,t){e||null===t?o(null===e?void 0:e):i.push(t)}if(r.noMux){let n=s?Error().stack:null,c="number"==typeof r.maxMessages&&r.maxMessages>0?r.maxMessages:-1,u=this.subscribe((0,h.createInbox)(this.options.inboxPrefix),{callback:(t,s)=>{if(s?.data?.length===0&&s?.headers?.status==="503"&&(t=new l.errors.NoRespondersError(e)),t){n&&(t.stack+=`

${n}`),d(t);return}a(null,s),"count"===r.strategy&&0==--c&&d(),"stall"===r.strategy&&(p(),f=setTimeout(()=>{d()},300)),"sentinel"===r.strategy&&s&&0===s.data.length&&d()}});u.requestSubject=e,u.closed.then(()=>{o()}).catch(e=>{i.stop(e)});let d=e=>{e&&i.push(()=>{throw e}),p(),u.drain().then(()=>{o()}).catch(e=>{o()})};i.iterClosed.then(()=>{p(),u?.unsubscribe()}).catch(e=>{p(),u?.unsubscribe()});try{this.publish(e,t,{reply:u.getSubject()})}catch(e){d(e)}let f=setTimeout(()=>{d()},r.maxWait),p=()=>{f&&clearTimeout(f)}}else{r.callback=a,i.iterClosed.then(()=>{s.cancel()}).catch(e=>{s.cancel(e)});let s=new u.RequestMany(this.protocol.muxSubscriptions,e,r);this.protocol.request(s);try{this.publish(e,t,{reply:`${this.protocol.muxSubscriptions.baseInbox}${s.token}`,headers:r.headers})}catch(e){s.cancel(e)}}return Promise.resolve(i)}request(e,t,r={timeout:1e3,noMux:!1}){try{this._check(e,!0,!0)}catch(e){return Promise.reject(e)}let i=!this.protocol.options.noAsyncTraces;if(r.timeout=r.timeout||1e3,r.timeout<1)return Promise.reject(l.InvalidArgumentError.format("timeout","must be greater than 0"));if(!r.noMux&&r.reply)return Promise.reject(l.InvalidArgumentError.format(["reply","noMux"],"are mutually exclusive"));if(r.noMux){let n=r.reply?r.reply:(0,h.createInbox)(this.options.inboxPrefix),o=(0,s.deferred)(),a=i?new l.errors.RequestError(""):null,c=this.subscribe(n,{max:1,timeout:r.timeout,callback:(t,r)=>{r&&r.data?.length===0&&r.headers?.code===503&&(t=new l.errors.NoRespondersError(e)),t?(t instanceof l.TimeoutError||(a?(a.message=t.message,a.cause=t,t=a):t=new l.errors.RequestError(t.message,{cause:t})),o.reject(t),c.unsubscribe()):o.resolve(r)}});return c.requestSubject=e,this.protocol.publish(e,t,{reply:n,headers:r.headers}),o}{let s=new u.RequestOne(this.protocol.muxSubscriptions,e,r,i);this.protocol.request(s);try{this.publish(e,t,{reply:`${this.protocol.muxSubscriptions.baseInbox}${s.token}`,headers:r.headers})}catch(e){s.cancel(e)}let n=Promise.race([s.timer,s.deferred]);return n.catch(()=>{s.cancel()}),n}}flush(){return this.isClosed()?Promise.reject(new l.errors.ClosedConnectionError):this.protocol.flush()}drain(){return this.isClosed()?Promise.reject(new l.errors.ClosedConnectionError):this.isDraining()?Promise.reject(new l.errors.DrainingConnectionError):(this.draining=!0,this.protocol.drain())}isClosed(){return this.protocol.isClosed()}isDraining(){return this.draining}getServer(){let e=this.protocol.getServer();return e?e.listen:""}status(){let e=new c.QueuedIteratorImpl;return e.iterClosed.then(()=>{let t=this.protocol.listeners.indexOf(e);t>-1&&this.protocol.listeners.splice(t,1)}),this.protocol.listeners.push(e),e}get info(){return this.protocol.isClosed()?void 0:this.protocol.info}async context(){return(await this.request("$SYS.REQ.USER.INFO")).json((e,t)=>"time"===e?new Date(Date.parse(t)):t)}stats(){return{inBytes:this.protocol.inBytes,outBytes:this.protocol.outBytes,inMsgs:this.protocol.inMsgs,outMsgs:this.protocol.outMsgs}}getServerVersion(){let e=this.info;return e?(0,o.parseSemVer)(e.version):void 0}async rtt(){if(this.isClosed())throw new l.errors.ClosedConnectionError;if(!this.protocol.connected)throw new l.errors.RequestError("connection disconnected");let e=Date.now();return await this.flush(),Date.now()-e}get features(){return this.protocol.features}reconnect(){return this.isClosed()?Promise.reject(new l.errors.ClosedConnectionError):this.isDraining()?Promise.reject(new l.errors.DrainingConnectionError):this.protocol.reconnect()}}t.NatsConnectionImpl=d},3267:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,i)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.nkeys=void 0,t.nkeys=n(r(3279))},4723:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nuid=t.Nuid=void 0;var s=r(1625);Object.defineProperty(t,"Nuid",{enumerable:!0,get:function(){return s.Nuid}}),Object.defineProperty(t,"nuid",{enumerable:!0,get:function(){return s.nuid}})},911:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_RECONNECT_TIME_WAIT=t.DEFAULT_MAX_PING_OUT=t.DEFAULT_PING_INTERVAL=t.DEFAULT_JITTER_TLS=t.DEFAULT_JITTER=t.DEFAULT_MAX_RECONNECT_ATTEMPTS=void 0,t.defaultOptions=c,t.hasWsProtocol=function(e){if(e){let{servers:t}=e;if("string"==typeof t&&(t=[t]),t)for(let e=0;e<t.length;e++){let r=t[e].toLowerCase();if(r.startsWith("ws://")||r.startsWith("wss://"))return!0}}return!1},t.buildAuthenticator=u,t.parseOptions=function(e){let t=`${n.DEFAULT_HOST}:${(0,i.defaultPort)()}`;if((e=e||{servers:[t]}).servers=e.servers||[],"string"==typeof e.servers&&(e.servers=[e.servers]),e.servers.length>0&&e.port)throw a.InvalidArgumentError.format(["servers","port"],"are mutually exclusive");0===e.servers.length&&e.port&&(e.servers=[`${n.DEFAULT_HOST}:${e.port}`]),e.servers&&0===e.servers.length&&(e.servers=[t]);let r=(0,s.extend)(c(),e);if(r.authenticator=u(r),["reconnectDelayHandler","authenticator"].forEach(e=>{if(r[e]&&"function"!=typeof r[e])throw TypeError(`'${e}' must be a function`)}),r.reconnectDelayHandler||(r.reconnectDelayHandler=()=>{let e=r.tls?r.reconnectJitterTLS:r.reconnectJitter;return e&&(e=Math.floor(Math.random()*++e)),r.reconnectTimeWait+e}),r.inboxPrefix&&(0,n.createInbox)(r.inboxPrefix),void 0===r.resolve&&(r.resolve="function"==typeof(0,i.getResolveFn)()),r.resolve&&"function"!=typeof(0,i.getResolveFn)())throw a.InvalidArgumentError.format("resolve","is not supported in the current runtime");return r},t.checkOptions=function(e,t){let{proto:r,tls_required:s,tls_available:i}=e;if((void 0===r||r<1)&&t.noEcho)throw new a.errors.ConnectionError("server does not support 'noEcho'");if(t.tls&&!(s||i))throw new a.errors.ConnectionError("server does not support 'tls'")},t.checkUnsupportedOption=function(e,t){if(t)throw a.InvalidArgumentError.format(e,"is not supported")};let s=r(4731),i=r(8700),n=r(4320),o=r(2798),a=r(6008);function c(){return{maxPingOut:t.DEFAULT_MAX_PING_OUT,maxReconnectAttempts:t.DEFAULT_MAX_RECONNECT_ATTEMPTS,noRandomize:!1,pedantic:!1,pingInterval:t.DEFAULT_PING_INTERVAL,reconnect:!0,reconnectJitter:t.DEFAULT_JITTER,reconnectJitterTLS:t.DEFAULT_JITTER_TLS,reconnectTimeWait:t.DEFAULT_RECONNECT_TIME_WAIT,tls:void 0,verbose:!1,waitOnFirstConnect:!1,ignoreAuthErrorAbort:!1}}function u(e){let t=[];return"function"==typeof e.authenticator&&t.push(e.authenticator),Array.isArray(e.authenticator)&&t.push(...e.authenticator),e.token&&t.push((0,o.tokenAuthenticator)(e.token)),e.user&&t.push((0,o.usernamePasswordAuthenticator)(e.user,e.pass)),0===t.length?(0,o.noAuthFn)():(0,o.multiAuthenticator)(t)}t.DEFAULT_MAX_RECONNECT_ATTEMPTS=10,t.DEFAULT_JITTER=100,t.DEFAULT_JITTER_TLS=1e3,t.DEFAULT_PING_INTERVAL=12e4,t.DEFAULT_MAX_PING_OUT=2,t.DEFAULT_RECONNECT_TIME_WAIT=2e3},6100:(e,t,r)=>{"use strict";var s,i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.State=t.Parser=t.Kind=void 0,t.describe=function(e){let t;let r="";switch(e.kind){case s.MSG:t="MSG";break;case s.OK:t="OK";break;case s.ERR:t="ERR",r=a.TD.decode(e.data);break;case s.PING:t="PING";break;case s.PONG:t="PONG";break;case s.INFO:t="INFO",r=a.TD.decode(e.data)}return`${t}: ${r}`};let o=r(381),a=r(1634);function c(){let e={};return e.sid=-1,e.hdr=-1,e.size=-1,e}!function(e){e[e.OK=0]="OK",e[e.ERR=1]="ERR",e[e.MSG=2]="MSG",e[e.INFO=3]="INFO",e[e.PING=4]="PING",e[e.PONG=5]="PONG"}(s||(t.Kind=s={}));class u{dispatcher;state;as;drop;hdr;ma;argBuf;msgBuf;constructor(e){this.dispatcher=e,this.state=i.OP_START,this.as=0,this.drop=0,this.hdr=0}parse(e){let t;for(t=0;t<e.length;t++){let r=e[t];switch(this.state){case i.OP_START:switch(r){case n.M:case n.m:this.state=i.OP_M,this.hdr=-1,this.ma=c();break;case n.H:case n.h:this.state=i.OP_H,this.hdr=0,this.ma=c();break;case n.P:case n.p:this.state=i.OP_P;break;case n.PLUS:this.state=i.OP_PLUS;break;case n.MINUS:this.state=i.OP_MINUS;break;case n.I:case n.i:this.state=i.OP_I;break;default:throw this.fail(e.subarray(t))}break;case i.OP_H:switch(r){case n.M:case n.m:this.state=i.OP_M;break;default:throw this.fail(e.subarray(t))}break;case i.OP_M:switch(r){case n.S:case n.s:this.state=i.OP_MS;break;default:throw this.fail(e.subarray(t))}break;case i.OP_MS:switch(r){case n.G:case n.g:this.state=i.OP_MSG;break;default:throw this.fail(e.subarray(t))}break;case i.OP_MSG:switch(r){case n.SPACE:case n.TAB:this.state=i.OP_MSG_SPC;break;default:throw this.fail(e.subarray(t))}break;case i.OP_MSG_SPC:switch(r){case n.SPACE:case n.TAB:continue;default:this.state=i.MSG_ARG,this.as=t}break;case i.MSG_ARG:switch(r){case n.CR:this.drop=1;break;case n.NL:{let r=this.argBuf?this.argBuf.bytes():e.subarray(this.as,t-this.drop);this.processMsgArgs(r),this.drop=0,this.as=t+1,this.state=i.MSG_PAYLOAD,t=this.as+this.ma.size-1;break}default:this.argBuf&&this.argBuf.writeByte(r)}break;case i.MSG_PAYLOAD:if(this.msgBuf){if(this.msgBuf.length>=this.ma.size){let e=this.msgBuf.bytes({copy:!1});this.dispatcher.push({kind:s.MSG,msg:this.ma,data:e}),this.argBuf=void 0,this.msgBuf=void 0,this.state=i.MSG_END}else{let s=this.ma.size-this.msgBuf.length,i=e.length-t;i<s&&(s=i),s>0?(this.msgBuf.write(e.subarray(t,t+s)),t=t+s-1):this.msgBuf.writeByte(r)}}else t-this.as>=this.ma.size&&(this.dispatcher.push({kind:s.MSG,msg:this.ma,data:e.subarray(this.as,t)}),this.argBuf=void 0,this.msgBuf=void 0,this.state=i.MSG_END);break;case i.MSG_END:if(r!==n.NL)continue;this.drop=0,this.as=t+1,this.state=i.OP_START;break;case i.OP_PLUS:switch(r){case n.O:case n.o:this.state=i.OP_PLUS_O;break;default:throw this.fail(e.subarray(t))}break;case i.OP_PLUS_O:switch(r){case n.K:case n.k:this.state=i.OP_PLUS_OK;break;default:throw this.fail(e.subarray(t))}break;case i.OP_PLUS_OK:r===n.NL&&(this.dispatcher.push({kind:s.OK}),this.drop=0,this.state=i.OP_START);break;case i.OP_MINUS:switch(r){case n.E:case n.e:this.state=i.OP_MINUS_E;break;default:throw this.fail(e.subarray(t))}break;case i.OP_MINUS_E:switch(r){case n.R:case n.r:this.state=i.OP_MINUS_ER;break;default:throw this.fail(e.subarray(t))}break;case i.OP_MINUS_ER:switch(r){case n.R:case n.r:this.state=i.OP_MINUS_ERR;break;default:throw this.fail(e.subarray(t))}break;case i.OP_MINUS_ERR:switch(r){case n.SPACE:case n.TAB:this.state=i.OP_MINUS_ERR_SPC;break;default:throw this.fail(e.subarray(t))}break;case i.OP_MINUS_ERR_SPC:switch(r){case n.SPACE:case n.TAB:continue;default:this.state=i.MINUS_ERR_ARG,this.as=t}break;case i.MINUS_ERR_ARG:switch(r){case n.CR:this.drop=1;break;case n.NL:{let r;this.argBuf?(r=this.argBuf.bytes(),this.argBuf=void 0):r=e.subarray(this.as,t-this.drop),this.dispatcher.push({kind:s.ERR,data:r}),this.drop=0,this.as=t+1,this.state=i.OP_START;break}default:this.argBuf&&this.argBuf.write(Uint8Array.of(r))}break;case i.OP_P:switch(r){case n.I:case n.i:this.state=i.OP_PI;break;case n.O:case n.o:this.state=i.OP_PO;break;default:throw this.fail(e.subarray(t))}break;case i.OP_PO:switch(r){case n.N:case n.n:this.state=i.OP_PON;break;default:throw this.fail(e.subarray(t))}break;case i.OP_PON:switch(r){case n.G:case n.g:this.state=i.OP_PONG;break;default:throw this.fail(e.subarray(t))}break;case i.OP_PONG:r===n.NL&&(this.dispatcher.push({kind:s.PONG}),this.drop=0,this.state=i.OP_START);break;case i.OP_PI:switch(r){case n.N:case n.n:this.state=i.OP_PIN;break;default:throw this.fail(e.subarray(t))}break;case i.OP_PIN:switch(r){case n.G:case n.g:this.state=i.OP_PING;break;default:throw this.fail(e.subarray(t))}break;case i.OP_PING:r===n.NL&&(this.dispatcher.push({kind:s.PING}),this.drop=0,this.state=i.OP_START);break;case i.OP_I:switch(r){case n.N:case n.n:this.state=i.OP_IN;break;default:throw this.fail(e.subarray(t))}break;case i.OP_IN:switch(r){case n.F:case n.f:this.state=i.OP_INF;break;default:throw this.fail(e.subarray(t))}break;case i.OP_INF:switch(r){case n.O:case n.o:this.state=i.OP_INFO;break;default:throw this.fail(e.subarray(t))}break;case i.OP_INFO:switch(r){case n.SPACE:case n.TAB:this.state=i.OP_INFO_SPC;break;default:throw this.fail(e.subarray(t))}break;case i.OP_INFO_SPC:switch(r){case n.SPACE:case n.TAB:continue;default:this.state=i.INFO_ARG,this.as=t}break;case i.INFO_ARG:switch(r){case n.CR:this.drop=1;break;case n.NL:{let r;this.argBuf?(r=this.argBuf.bytes(),this.argBuf=void 0):r=e.subarray(this.as,t-this.drop),this.dispatcher.push({kind:s.INFO,data:r}),this.drop=0,this.as=t+1,this.state=i.OP_START;break}default:this.argBuf&&this.argBuf.writeByte(r)}break;default:throw this.fail(e.subarray(t))}}this.state!==i.MSG_ARG&&this.state!==i.MINUS_ERR_ARG&&this.state!==i.INFO_ARG||this.argBuf||(this.argBuf=new o.DenoBuffer(e.subarray(this.as,t-this.drop))),this.state!==i.MSG_PAYLOAD||this.msgBuf||(this.argBuf||this.cloneMsgArg(),this.msgBuf=new o.DenoBuffer(e.subarray(this.as)))}cloneMsgArg(){let e=this.ma.subject.length,t=new Uint8Array(e+(this.ma.reply?this.ma.reply.length:0));t.set(this.ma.subject),this.ma.reply&&t.set(this.ma.reply,e),this.argBuf=new o.DenoBuffer(t),this.ma.subject=t.subarray(0,e),this.ma.reply&&(this.ma.reply=t.subarray(e))}processMsgArgs(e){if(this.hdr>=0)return this.processHeaderMsgArgs(e);let t=[],r=-1;for(let s=0;s<e.length;s++)switch(e[s]){case n.SPACE:case n.TAB:case n.CR:case n.NL:r>=0&&(t.push(e.subarray(r,s)),r=-1);break;default:r<0&&(r=s)}switch(r>=0&&t.push(e.subarray(r)),t.length){case 3:this.ma.subject=t[0],this.ma.sid=this.protoParseInt(t[1]),this.ma.reply=void 0,this.ma.size=this.protoParseInt(t[2]);break;case 4:this.ma.subject=t[0],this.ma.sid=this.protoParseInt(t[1]),this.ma.reply=t[2],this.ma.size=this.protoParseInt(t[3]);break;default:throw this.fail(e,"processMsgArgs Parse Error")}if(this.ma.sid<0)throw this.fail(e,"processMsgArgs Bad or Missing Sid Error");if(this.ma.size<0)throw this.fail(e,"processMsgArgs Bad or Missing Size Error")}fail(e,t=""){return t=t?`${t} [${this.state}]`:`parse error [${this.state}]`,Error(`${t}: ${a.TD.decode(e)}`)}processHeaderMsgArgs(e){let t=[],r=-1;for(let s=0;s<e.length;s++)switch(e[s]){case n.SPACE:case n.TAB:case n.CR:case n.NL:r>=0&&(t.push(e.subarray(r,s)),r=-1);break;default:r<0&&(r=s)}switch(r>=0&&t.push(e.subarray(r)),t.length){case 4:this.ma.subject=t[0],this.ma.sid=this.protoParseInt(t[1]),this.ma.reply=void 0,this.ma.hdr=this.protoParseInt(t[2]),this.ma.size=this.protoParseInt(t[3]);break;case 5:this.ma.subject=t[0],this.ma.sid=this.protoParseInt(t[1]),this.ma.reply=t[2],this.ma.hdr=this.protoParseInt(t[3]),this.ma.size=this.protoParseInt(t[4]);break;default:throw this.fail(e,"processHeaderMsgArgs Parse Error")}if(this.ma.sid<0)throw this.fail(e,"processHeaderMsgArgs Bad or Missing Sid Error");if(this.ma.hdr<0||this.ma.hdr>this.ma.size)throw this.fail(e,"processHeaderMsgArgs Bad or Missing Header Size Error");if(this.ma.size<0)throw this.fail(e,"processHeaderMsgArgs Bad or Missing Size Error")}protoParseInt(e){if(0===e.length)return -1;let t=0;for(let r=0;r<e.length;r++){if(e[r]<48||e[r]>57)return -1;t=10*t+(e[r]-48)}return t}}t.Parser=u,function(e){e[e.OP_START=0]="OP_START",e[e.OP_PLUS=1]="OP_PLUS",e[e.OP_PLUS_O=2]="OP_PLUS_O",e[e.OP_PLUS_OK=3]="OP_PLUS_OK",e[e.OP_MINUS=4]="OP_MINUS",e[e.OP_MINUS_E=5]="OP_MINUS_E",e[e.OP_MINUS_ER=6]="OP_MINUS_ER",e[e.OP_MINUS_ERR=7]="OP_MINUS_ERR",e[e.OP_MINUS_ERR_SPC=8]="OP_MINUS_ERR_SPC",e[e.MINUS_ERR_ARG=9]="MINUS_ERR_ARG",e[e.OP_M=10]="OP_M",e[e.OP_MS=11]="OP_MS",e[e.OP_MSG=12]="OP_MSG",e[e.OP_MSG_SPC=13]="OP_MSG_SPC",e[e.MSG_ARG=14]="MSG_ARG",e[e.MSG_PAYLOAD=15]="MSG_PAYLOAD",e[e.MSG_END=16]="MSG_END",e[e.OP_H=17]="OP_H",e[e.OP_P=18]="OP_P",e[e.OP_PI=19]="OP_PI",e[e.OP_PIN=20]="OP_PIN",e[e.OP_PING=21]="OP_PING",e[e.OP_PO=22]="OP_PO",e[e.OP_PON=23]="OP_PON",e[e.OP_PONG=24]="OP_PONG",e[e.OP_I=25]="OP_I",e[e.OP_IN=26]="OP_IN",e[e.OP_INF=27]="OP_INF",e[e.OP_INFO=28]="OP_INFO",e[e.OP_INFO_SPC=29]="OP_INFO_SPC",e[e.INFO_ARG=30]="INFO_ARG"}(i||(t.State=i={})),function(e){e[e.CR="\r".charCodeAt(0)]="CR",e[e.E="E".charCodeAt(0)]="E",e[e.e="e".charCodeAt(0)]="e",e[e.F="F".charCodeAt(0)]="F",e[e.f="f".charCodeAt(0)]="f",e[e.G="G".charCodeAt(0)]="G",e[e.g="g".charCodeAt(0)]="g",e[e.H="H".charCodeAt(0)]="H",e[e.h="h".charCodeAt(0)]="h",e[e.I="I".charCodeAt(0)]="I",e[e.i="i".charCodeAt(0)]="i",e[e.K="K".charCodeAt(0)]="K",e[e.k="k".charCodeAt(0)]="k",e[e.M="M".charCodeAt(0)]="M",e[e.m="m".charCodeAt(0)]="m",e[e.MINUS="-".charCodeAt(0)]="MINUS",e[e.N="N".charCodeAt(0)]="N",e[e.n="n".charCodeAt(0)]="n",e[e.NL="\n".charCodeAt(0)]="NL",e[e.O="O".charCodeAt(0)]="O",e[e.o="o".charCodeAt(0)]="o",e[e.P="P".charCodeAt(0)]="P",e[e.p="p".charCodeAt(0)]="p",e[e.PLUS="+".charCodeAt(0)]="PLUS",e[e.R="R".charCodeAt(0)]="R",e[e.r="r".charCodeAt(0)]="r",e[e.S="S".charCodeAt(0)]="S",e[e.s="s".charCodeAt(0)]="s",e[e.SPACE=" ".charCodeAt(0)]="SPACE",e[e.TAB="	".charCodeAt(0)]="TAB"}(n||(n={}))},8159:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolHandler=t.Subscriptions=t.SubscriptionImpl=t.Connect=t.INFO=void 0;let s=r(1634),i=r(8700),n=r(4731),o=r(7721),a=r(5121),c=r(9481),u=r(1434),h=r(6442),l=r(6100),d=r(268),f=r(5991),p=r(911),b=r(6008);t.INFO=/^INFO\s+([^\r\n]+)\r\n/i;let y=(0,s.encode)("PONG\r\n"),g=(0,s.encode)("PING\r\n");class m{echo;no_responders;protocol;verbose;pedantic;jwt;nkey;sig;user;pass;auth_token;tls_required;name;lang;version;headers;constructor(e,t,r){this.protocol=1,this.version=e.version,this.lang=e.lang,this.echo=!t.noEcho&&void 0,this.verbose=t.verbose,this.pedantic=t.pedantic,this.tls_required=!!t.tls||void 0,this.name=t.name;let s=(t&&"function"==typeof t.authenticator?t.authenticator(r):{})||{};(0,n.extend)(this,s)}}t.Connect=m;class _{slow;cb;notified;constructor(e,t){this.slow=e,this.cb=t,this.notified=!1}maybeNotify(e){e<=this.slow?this.notified=!1:this.notified||(this.cb(e),this.notified=!0)}}class v extends c.QueuedIteratorImpl{sid;queue;draining;max;subject;drained;protocol;timer;info;cleanupFn;closed;requestSubject;slow;constructor(e,t,r={}){super(),(0,n.extend)(this,r),this.protocol=e,this.subject=t,this.draining=!1,this.noIterator="function"==typeof r.callback,this.closed=(0,n.deferred)();let s=!e.options?.noAsyncTraces;r.timeout&&(this.timer=(0,n.timeout)(r.timeout,s),this.timer.then(()=>{this.timer=void 0}).catch(e=>{this.stop(e),this.noIterator&&this.callback(e,{})})),this.noIterator||this.iterClosed.then(e=>{this.closed.resolve(e),this.unsubscribe()})}setSlowNotificationFn(e,t){if(this.slow=void 0,t){if(this.noIterator)throw Error("callbacks don't support slow notifications");this.slow=new _(e,t)}}callback(e,t){this.cancelTimeout(),e?this.stop(e):this.push(t),!e&&this.slow&&this.slow.maybeNotify(this.getPending())}close(e){if(!this.isClosed()){this.cancelTimeout();let t=()=>{if(this.stop(),this.cleanupFn)try{this.cleanupFn(this,this.info)}catch(e){}this.closed.resolve(e)};this.noIterator?t():this.push(t)}}unsubscribe(e){this.protocol.unsubscribe(this,e)}cancelTimeout(){this.timer&&(this.timer.cancel(),this.timer=void 0)}drain(){return this.protocol.isClosed()?Promise.reject(new b.errors.ClosedConnectionError):this.isClosed()?Promise.reject(new b.errors.InvalidOperationError("subscription is already closed")):(this.drained||(this.draining=!0,this.protocol.unsub(this),this.drained=this.protocol.flush((0,n.deferred)()).then(()=>{this.protocol.subscriptions.cancel(this)}).catch(()=>{this.protocol.subscriptions.cancel(this)})),this.drained)}isDraining(){return this.draining}isClosed(){return this.done}getSubject(){return this.subject}getMax(){return this.max}getID(){return this.sid}}t.SubscriptionImpl=v;class P{mux;subs;sidCounter;constructor(){this.sidCounter=0,this.mux=null,this.subs=new Map}size(){return this.subs.size}add(e){return this.sidCounter++,e.sid=this.sidCounter,this.subs.set(e.sid,e),e}setMux(e){return this.mux=e,e}getMux(){return this.mux}get(e){return this.subs.get(e)}resub(e){return this.sidCounter++,this.subs.delete(e.sid),e.sid=this.sidCounter,this.subs.set(e.sid,e),e}all(){return Array.from(this.subs.values())}cancel(e){e&&(e.close(),this.subs.delete(e.sid))}handleError(e){let t;let r=this.all();return"subscription"===e.operation?t=r.find(t=>t.subject===e.subject&&t.queue===e.queue):"publish"===e.operation&&(t=r.find(t=>t.requestSubject===e.subject)),!!t&&(t.callback(e,{}),t.close(e),this.subs.delete(t.sid),t!==this.mux)}close(){this.subs.forEach(e=>{e.close()})}}t.Subscriptions=P;class E{connected;connectedOnce;infoReceived;info;muxSubscriptions;options;outbound;pongs;subscriptions;transport;noMorePublishing;connectError;publisher;_closed;closed;listeners;heartbeats;parser;outMsgs;inMsgs;outBytes;inBytes;pendingLimit;lastError;abortReconnect;whyClosed;servers;server;features;connectPromise;dialDelay;raceTimer;constructor(e,t){this._closed=!1,this.connected=!1,this.connectedOnce=!1,this.infoReceived=!1,this.noMorePublishing=!1,this.abortReconnect=!1,this.listeners=[],this.pendingLimit=32768,this.outMsgs=0,this.inMsgs=0,this.outBytes=0,this.inBytes=0,this.options=e,this.publisher=t,this.subscriptions=new P,this.muxSubscriptions=new u.MuxSubscription,this.outbound=new o.DataBuffer,this.pongs=[],this.whyClosed="",this.pendingLimit=e.pendingLimit||this.pendingLimit,this.features=new f.Features({major:0,minor:0,micro:0}),this.connectPromise=null,this.dialDelay=null;let r="string"==typeof e.servers?[e.servers]:e.servers;this.servers=new a.Servers(r,{randomize:!e.noRandomize}),this.closed=(0,n.deferred)(),this.parser=new l.Parser(this),this.heartbeats=new h.Heartbeat(this,this.options.pingInterval||p.DEFAULT_PING_INTERVAL,this.options.maxPingOut||p.DEFAULT_MAX_PING_OUT)}resetOutbound(){this.outbound.reset();let e=this.pongs;this.pongs=[];let t=new b.errors.RequestError("connection disconnected");t.stack="",e.forEach(e=>{e.reject(t)}),this.parser=new l.Parser(this),this.infoReceived=!1}dispatchStatus(e){this.listeners.forEach(t=>{t.push(e)})}prepare(){this.transport&&this.transport.discard(),this.info=void 0,this.resetOutbound();let e=(0,n.deferred)();return e.catch(()=>{}),this.pongs.unshift(e),this.connectError=t=>{e.reject(t)},this.transport=(0,i.newTransport)(),this.transport.closed().then(async e=>{if(this.connected=!1,!this.isClosed()){await this.disconnected(this.transport.closeError||this.lastError);return}}),e}disconnect(){this.dispatchStatus({type:"staleConnection"}),this.transport.disconnect()}reconnect(){return this.connected&&(this.dispatchStatus({type:"forceReconnect"}),this.transport.disconnect()),Promise.resolve()}async disconnected(e){this.dispatchStatus({type:"disconnect",server:this.servers.getCurrentServer().toString()}),this.options.reconnect?await this.dialLoop().then(()=>{this.dispatchStatus({type:"reconnect",server:this.servers.getCurrentServer().toString()}),this.lastError instanceof b.errors.UserAuthenticationExpiredError&&(this.lastError=void 0)}).catch(e=>{this.close(e).catch()}):await this.close(e).catch()}async dial(e){let t=this.prepare();try{this.raceTimer=(0,n.timeout)(this.options.timeout||2e4);let t=this.transport.connect(e,this.options);await Promise.race([t,this.raceTimer]),(async()=>{try{for await(let e of this.transport)this.parser.parse(e)}catch(e){console.log("reader closed",e)}})().then()}catch(e){t.reject(e)}try{await Promise.race([this.raceTimer,t]),this.raceTimer?.cancel(),this.connected=!0,this.connectError=void 0,this.sendSubscriptions(),this.connectedOnce=!0,this.server.didConnect=!0,this.server.reconnects=0,this.flushPending(),this.heartbeats.start()}catch(e){throw this.raceTimer?.cancel(),await this.transport.close(e),e}}async _doDial(e){let{resolve:t}=this.options,r=await e.resolve({fn:(0,i.getResolveFn)(),debug:this.options.debug,randomize:!this.options.noRandomize,resolve:t}),s=null;for(let e of r)try{s=null,this.dispatchStatus({type:"reconnecting"}),await this.dial(e);return}catch(e){s=e}throw s}dialLoop(){return null===this.connectPromise&&(this.connectPromise=this.dodialLoop(),this.connectPromise.then(()=>{}).catch(()=>{}).finally(()=>{this.connectPromise=null})),this.connectPromise}async dodialLoop(){let e;for(;;){this._closed&&this.servers.clear();let t=this.options.reconnectDelayHandler?this.options.reconnectDelayHandler():p.DEFAULT_RECONNECT_TIME_WAIT,r=t,s=this.selectServer();if(!s||this.abortReconnect){if(e)throw e;if(this.lastError)throw this.lastError;throw new b.errors.ConnectionError("connection refused")}let i=Date.now();if(0===s.lastConnect||s.lastConnect+t<=i){s.lastConnect=Date.now();try{await this._doDial(s);break}catch(r){if(e=r,!this.connectedOnce){if(this.options.waitOnFirstConnect)continue;this.servers.removeCurrentServer()}s.reconnects++;let t=this.options.maxReconnectAttempts||0;-1!==t&&s.reconnects>=t&&this.servers.removeCurrentServer()}}else r=Math.min(r,s.lastConnect+t-i),this.dialDelay=(0,n.delay)(r),await this.dialDelay}}static async connect(e,t){let r=new E(e,t);return await r.dialLoop(),r}static toError(e){let t=b.errors.PermissionViolationError.parse(e);return t||(t=b.errors.UserAuthenticationExpiredError.parse(e))||(t=b.errors.AuthorizationError.parse(e))?t:new b.errors.ProtocolError(e)}processMsg(e,t){if(this.inMsgs++,this.inBytes+=t.length,!this.subscriptions.sidCounter)return;let r=this.subscriptions.get(e.sid);r&&(r.received+=1,r.callback&&r.callback(null,new d.MsgImpl(e,t,this)),void 0!==r.max&&r.received>=r.max&&r.unsubscribe())}processError(e){let t=(0,s.decode)(e);t.startsWith("'")&&t.endsWith("'")&&(t=t.slice(1,t.length-1));let r=E.toError(t);if(r.constructor===b.errors.PermissionViolationError){let e=this.subscriptions.getMux(),t=!!e&&r.subject===e.subject;this.subscriptions.handleError(r),this.muxSubscriptions.handleError(t,r),t&&this.subscriptions.setMux(null)}this.dispatchStatus({type:"error",error:r}),this.handleError(r)}handleError(e){(e instanceof b.errors.UserAuthenticationExpiredError||e instanceof b.errors.AuthorizationError)&&this.handleAuthError(e),e instanceof b.errors.PermissionViolationError||(this.lastError=e)}handleAuthError(e){(this.lastError instanceof b.errors.UserAuthenticationExpiredError||this.lastError instanceof b.errors.AuthorizationError)&&!1===this.options.ignoreAuthErrorAbort&&(this.abortReconnect=!0),this.connectError?this.connectError(e):this.disconnect()}processPing(){this.transport.send(y)}processPong(){let e=this.pongs.shift();e&&e.resolve()}processInfo(e){let t=JSON.parse((0,s.decode)(e));this.info=t;let r=this.options&&this.options.ignoreClusterUpdates?void 0:this.servers.update(t,this.transport.isEncrypted());if(!this.infoReceived){this.features.update((0,f.parseSemVer)(t.version)),this.infoReceived=!0,this.transport.isEncrypted()&&this.servers.updateTLSName();let{version:e,lang:r}=this.transport;try{let n=new m({version:e,lang:r},this.options,t.nonce);t.headers&&(n.headers=!0,n.no_responders=!0);let o=JSON.stringify(n);this.transport.send((0,s.encode)(`CONNECT ${o}${i.CR_LF}`)),this.transport.send(g)}catch(e){this.close(e).catch()}}if(r){let{added:e,deleted:t}=r;this.dispatchStatus({type:"update",added:e,deleted:t})}void 0!==t.ldm&&t.ldm&&this.dispatchStatus({type:"ldm",server:this.servers.getCurrentServer().toString()})}push(e){switch(e.kind){case l.Kind.MSG:{let{msg:t,data:r}=e;this.processMsg(t,r);break}case l.Kind.OK:break;case l.Kind.ERR:this.processError(e.data);break;case l.Kind.PING:this.processPing();break;case l.Kind.PONG:this.processPong();break;case l.Kind.INFO:this.processInfo(e.data)}}sendCommand(e,...t){let r;let i=this.outbound.length();r="string"==typeof e?(0,s.encode)(e):e,this.outbound.fill(r,...t),0===i?queueMicrotask(()=>{this.flushPending()}):this.outbound.size()>=this.pendingLimit&&this.flushPending()}publish(e,t=s.Empty,r){let n,o;if(t instanceof Uint8Array)n=t;else if("string"==typeof t)n=s.TE.encode(t);else throw TypeError("payload types can be strings or Uint8Array");let a=n.length;(r=r||{}).reply=r.reply||"";let c=s.Empty,u=0;if(r.headers&&(this.info&&!this.info.headers&&b.InvalidArgumentError.format("headers","are not available on this server"),u=(c=r.headers.encode()).length,a=n.length+u),this.info&&a>this.info.max_payload)throw b.InvalidArgumentError.format("payload","max_payload size exceeded");this.outBytes+=a,this.outMsgs++,r.headers?(o=r.reply?`HPUB ${e} ${r.reply} ${u} ${a}\r
`:`HPUB ${e} ${u} ${a}\r
`,this.sendCommand(o,c,n,i.CRLF)):(o=r.reply?`PUB ${e} ${r.reply} ${a}\r
`:`PUB ${e} ${a}\r
`,this.sendCommand(o,n,i.CRLF))}request(e){return this.initMux(),this.muxSubscriptions.add(e),e}subscribe(e){return this.subscriptions.add(e),this._subunsub(e),e}_sub(e){e.queue?this.sendCommand(`SUB ${e.subject} ${e.queue} ${e.sid}\r
`):this.sendCommand(`SUB ${e.subject} ${e.sid}\r
`)}_subunsub(e){return this._sub(e),e.max&&this.unsubscribe(e,e.max),e}unsubscribe(e,t){this.unsub(e,t),(void 0===e.max||e.received>=e.max)&&this.subscriptions.cancel(e)}unsub(e,t){!e||this.isClosed()||(t?this.sendCommand(`UNSUB ${e.sid} ${t}\r
`):this.sendCommand(`UNSUB ${e.sid}\r
`),e.max=t)}resub(e,t){!e||this.isClosed()||(this.unsub(e),e.subject=t,this.subscriptions.resub(e),this._sub(e))}flush(e){return e||(e=(0,n.deferred)()),this.pongs.push(e),this.outbound.fill(g),this.flushPending(),e}sendSubscriptions(){let e=[];this.subscriptions.all().forEach(t=>{t.queue?e.push(`SUB ${t.subject} ${t.queue} ${t.sid}${i.CR_LF}`):e.push(`SUB ${t.subject} ${t.sid}${i.CR_LF}`)}),e.length&&this.transport.send((0,s.encode)(e.join("")))}async close(e){if(this._closed)return;this.whyClosed=Error("close trace").stack||"",this.heartbeats.cancel(),this.connectError&&(this.connectError(e),this.connectError=void 0),this.muxSubscriptions.close(),this.subscriptions.close();let t=[];for(let e=0;e<this.listeners.length;e++){let r=this.listeners[e];r&&(r.stop(),t.push(r.iterClosed))}t.length&&await Promise.all(t),this._closed=!0,await this.transport.close(e),this.raceTimer?.cancel(),this.dialDelay?.cancel(),this.closed.resolve(e)}isClosed(){return this._closed}async drain(){let e=this.subscriptions.all(),t=[];e.forEach(e=>{t.push(e.drain())});try{await Promise.allSettled(t)}catch{}finally{this.noMorePublishing=!0,await this.flush()}return this.close()}flushPending(){if(this.infoReceived&&this.connected&&this.outbound.size()){let e=this.outbound.drain();this.transport.send(e)}}initMux(){if(!this.subscriptions.getMux()){let e=this.muxSubscriptions.init(this.options.inboxPrefix),t=new v(this,`${e}*`);t.callback=this.muxSubscriptions.dispatcher(),this.subscriptions.setMux(t),this.subscribe(t)}}selectServer(){let e=this.servers.selectServer();if(void 0!==e)return this.server=e,this.server}getServer(){return this.server}}t.ProtocolHandler=E},9481:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueuedIteratorImpl=void 0;let s=r(4731),i=r(6008);class n{inflight;processed;received;noIterator;iterClosed;done;signal;yields;filtered;pendingFiltered;ctx;_data;err;time;profile;yielding;didBreak;constructor(){this.inflight=0,this.filtered=0,this.pendingFiltered=0,this.processed=0,this.received=0,this.noIterator=!1,this.done=!1,this.signal=(0,s.deferred)(),this.yields=[],this.iterClosed=(0,s.deferred)(),this.time=0,this.yielding=!1,this.didBreak=!1,this.profile=!1}[Symbol.asyncIterator](){return this.iterate()}push(e){if(!this.done){if(this.didBreak){if("function"==typeof e)try{e()}catch(e){}return}this.yields.push(e),this.signal.resolve()}}async *iterate(){if(this.noIterator)throw new i.InvalidOperationError("iterator cannot be used when a callback is registered");if(this.yielding)throw new i.InvalidOperationError("iterator is already yielding");this.yielding=!0;try{for(;;){if(0===this.yields.length&&await this.signal,this.err)throw this.err;let e=this.yields;this.inflight=e.length,this.yields=[];for(let t=0;t<e.length;t++){if("function"==typeof e[t]){let r=e[t];try{r()}catch(e){throw e}if(this.err)throw this.err;continue}this.processed++;let r=this.profile?Date.now():0;yield e[t],this.time=this.profile?Date.now()-r:0,this.inflight--}if(this.done)break;0===this.yields.length&&(e.length=0,this.yields=e,this.signal=(0,s.deferred)())}}finally{this.didBreak=!0,this.stop()}}stop(e){this.done||(this.err=e,this.done=!0,this.signal.resolve(),this.iterClosed.resolve(e))}getProcessed(){return this.noIterator?this.received:this.processed}getPending(){return this.yields.length+this.inflight-this.pendingFiltered}getReceived(){return this.received-this.filtered}}t.QueuedIteratorImpl=n},9148:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestOne=t.RequestMany=t.BaseRequest=void 0;let s=r(4731),i=r(4723),n=r(6008);class o{token;received;ctx;requestSubject;mux;constructor(e,t,r=!0){this.mux=e,this.requestSubject=t,this.received=0,this.token=i.nuid.next(),r&&(this.ctx=new n.RequestError)}}t.BaseRequest=o;class a extends o{callback;done;timer;max;opts;constructor(e,t,r={maxWait:1e3}){if(super(e,t),this.opts=r,"function"!=typeof this.opts.callback)throw TypeError("callback must be a function");this.callback=this.opts.callback,this.max="number"==typeof r.maxMessages&&r.maxMessages>0?r.maxMessages:-1,this.done=(0,s.deferred)(),this.done.then(()=>{this.callback(null,null)}),this.timer=setTimeout(()=>{this.cancel()},r.maxWait)}cancel(e){e&&this.callback(e,null),clearTimeout(this.timer),this.mux.cancel(this),this.done.resolve()}resolver(e,t){e?(this.ctx&&(e.stack+=`

${this.ctx.stack}`),this.cancel(e)):(this.callback(null,t),"count"===this.opts.strategy&&(this.max--,0===this.max&&this.cancel()),"stall"===this.opts.strategy&&(clearTimeout(this.timer),this.timer=setTimeout(()=>{this.cancel()},this.opts.stall||300)),"sentinel"===this.opts.strategy&&t&&0===t.data.length&&this.cancel())}}t.RequestMany=a;class c extends o{deferred;timer;constructor(e,t,r={timeout:1e3},i=!0){super(e,t,i),this.deferred=(0,s.deferred)(),this.timer=(0,s.timeout)(r.timeout,i)}resolver(e,t){this.timer&&this.timer.cancel(),e?(e instanceof n.TimeoutError||(this.ctx?(this.ctx.message=e.message,this.ctx.cause=e,e=this.ctx):e=new n.errors.RequestError(e.message,{cause:e})),this.deferred.reject(e)):this.deferred.resolve(t),this.cancel()}cancel(e){this.timer&&this.timer.cancel(),this.mux.cancel(this),this.deferred.reject(e||new n.RequestError("cancelled"))}}t.RequestOne=c},5991:(e,t)=>{"use strict";var r;function s(e=""){let t=e.match(/(\d+).(\d+).(\d+)/);if(t)return{major:parseInt(t[1]),minor:parseInt(t[2]),micro:parseInt(t[3])};throw Error(`'${e}' is not a semver value`)}function i(e,t){return e.major<t.major?-1:e.major>t.major?1:e.minor<t.minor?-1:e.minor>t.minor?1:e.micro<t.micro?-1:e.micro>t.micro?1:0}Object.defineProperty(t,"__esModule",{value:!0}),t.Features=t.Feature=void 0,t.parseSemVer=s,t.compare=i,function(e){e.JS_KV="js_kv",e.JS_OBJECTSTORE="js_objectstore",e.JS_PULL_MAX_BYTES="js_pull_max_bytes",e.JS_NEW_CONSUMER_CREATE_API="js_new_consumer_create",e.JS_ALLOW_DIRECT="js_allow_direct",e.JS_MULTIPLE_CONSUMER_FILTER="js_multiple_consumer_filter",e.JS_SIMPLIFICATION="js_simplification",e.JS_STREAM_CONSUMER_METADATA="js_stream_consumer_metadata",e.JS_CONSUMER_FILTER_SUBJECTS="js_consumer_filter_subjects",e.JS_STREAM_FIRST_SEQ="js_stream_first_seq",e.JS_STREAM_SUBJECT_TRANSFORM="js_stream_subject_transform",e.JS_STREAM_SOURCE_SUBJECT_TRANSFORM="js_stream_source_subject_transform",e.JS_STREAM_COMPRESSION="js_stream_compression",e.JS_DEFAULT_CONSUMER_LIMITS="js_default_consumer_limits",e.JS_BATCH_DIRECT_GET="js_batch_direct_get",e.JS_PRIORITY_GROUPS="js_priority_groups"}(r||(t.Feature=r={}));class n{server;features;disabled;constructor(e){this.features=new Map,this.disabled=[],this.update(e)}resetDisabled(){this.disabled.length=0,this.update(this.server)}disable(e){this.disabled.push(e),this.update(this.server)}isDisabled(e){return -1!==this.disabled.indexOf(e)}update(e){"string"==typeof e&&(e=s(e)),this.server=e,this.set(r.JS_KV,"2.6.2"),this.set(r.JS_OBJECTSTORE,"2.6.3"),this.set(r.JS_PULL_MAX_BYTES,"2.8.3"),this.set(r.JS_NEW_CONSUMER_CREATE_API,"2.9.0"),this.set(r.JS_ALLOW_DIRECT,"2.9.0"),this.set(r.JS_MULTIPLE_CONSUMER_FILTER,"2.10.0"),this.set(r.JS_SIMPLIFICATION,"2.9.4"),this.set(r.JS_STREAM_CONSUMER_METADATA,"2.10.0"),this.set(r.JS_CONSUMER_FILTER_SUBJECTS,"2.10.0"),this.set(r.JS_STREAM_FIRST_SEQ,"2.10.0"),this.set(r.JS_STREAM_SUBJECT_TRANSFORM,"2.10.0"),this.set(r.JS_STREAM_SOURCE_SUBJECT_TRANSFORM,"2.10.0"),this.set(r.JS_STREAM_COMPRESSION,"2.10.0"),this.set(r.JS_DEFAULT_CONSUMER_LIMITS,"2.10.0"),this.set(r.JS_BATCH_DIRECT_GET,"2.11.0"),this.set(r.JS_PRIORITY_GROUPS,"2.11.0"),this.disabled.forEach(e=>{this.features.delete(e)})}set(e,t){this.features.set(e,{min:t,ok:i(this.server,s(t))>=0})}get(e){return this.features.get(e)||{min:"unknown",ok:!1}}supports(e){return this.get(e)?.ok||!1}require(e){return"string"==typeof e&&(e=s(e)),i(this.server,e)>=0}}t.Features=n},5121:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Servers=t.ServerImpl=void 0,t.isIPV4OrHostname=a,t.hostPort=c;let s=r(8700),i=r(4731),n=r(2377),o=r(4320);function a(e){return -1===e.indexOf("[")&&-1===e.indexOf("::")&&(-1!==e.indexOf(".")||e.split(":").length<=2)}function c(e){(e=e.trim()).match(/^(.*:\/\/)(.*)/m)&&(e=e.replace(/^(.*:\/\/)(.*)/gm,"$2")),a(e=function(e){let t="::FFFF:",r=e.toUpperCase().indexOf(t);if(-1!==r&&-1!==e.indexOf(".")){let s=e.substring(r+t.length);return(s=s.replace("[","")).replace("]","")}return e}(e))||-1!==e.indexOf("[")||(e=`[${e}]`);let t=a(e)?e.match(/(:)(\d+)/):e.match(/(]:)(\d+)/),r=t&&3===t.length&&t[1]&&t[2]?parseInt(t[2]):o.DEFAULT_PORT,s=new URL(`${80===r?"https":"http"}://${e}`);s.port=`${r}`;let i=s.hostname;return"["===i.charAt(0)&&(i=i.substring(1,i.length-1)),{listen:s.host,hostname:i,port:r}}class u{src;listen;hostname;port;didConnect;reconnects;lastConnect;gossiped;tlsName;resolves;constructor(e,t=!1){this.src=e,this.tlsName="";let r=c(e);this.listen=r.listen,this.hostname=r.hostname,this.port=r.port,this.didConnect=!1,this.reconnects=0,this.lastConnect=0,this.gossiped=t}toString(){return this.listen}async resolve(e){if(!e.fn||!1===e.resolve)return[this];let t=[];if((0,n.isIP)(this.hostname))return[this];{let r=await e.fn(this.hostname);for(let s of(e.debug&&console.log(`resolve ${this.hostname} = ${r.join(",")}`),r)){let e=80===this.port?"https":"http",r=new URL(`${e}://${a(s)?s:"["+s+"]"}`);r.port=`${this.port}`;let i=new u(r.host,!1);i.tlsName=this.hostname,t.push(i)}}return e.randomize&&(0,i.shuffle)(t),this.resolves=t,t}}t.ServerImpl=u;class h{firstSelect;servers;currentServer;tlsName;randomize;constructor(e=[],t={}){this.firstSelect=!0,this.servers=[],this.tlsName="",this.randomize=t.randomize||!1;let r=(0,s.getUrlParseFn)();e&&(e.forEach(e=>{e=r?r(e):e,this.servers.push(new u(e))}),this.randomize&&(this.servers=(0,i.shuffle)(this.servers))),0===this.servers.length&&this.addServer(`${o.DEFAULT_HOST}:${(0,s.defaultPort)()}`,!1),this.currentServer=this.servers[0]}clear(){this.servers.length=0}updateTLSName(){let e=this.getCurrentServer();(0,n.isIP)(e.hostname)||(this.tlsName=e.hostname,this.servers.forEach(e=>{e.gossiped&&(e.tlsName=this.tlsName)}))}getCurrentServer(){return this.currentServer}addServer(e,t=!1){let r=(0,s.getUrlParseFn)(),i=new u(e=r?r(e):e,t);(0,n.isIP)(i.hostname)&&(i.tlsName=this.tlsName),this.servers.push(i)}selectServer(){if(this.firstSelect)return this.firstSelect=!1,this.currentServer;let e=this.servers.shift();return e&&(this.servers.push(e),this.currentServer=e),e}removeCurrentServer(){this.removeServer(this.currentServer)}removeServer(e){if(e){let t=this.servers.indexOf(e);this.servers.splice(t,1)}}length(){return this.servers.length}next(){return this.servers.length?this.servers[0]:void 0}getServers(){return this.servers}update(e,t){let r=[],i=[],n=(0,s.getUrlParseFn)(),o=new Map;e.connect_urls&&e.connect_urls.length>0&&e.connect_urls.forEach(e=>{let r=new u(e=n?n(e,t):e,!0);o.set(e,r)});let a=[];return this.servers.forEach((e,t)=>{let r=e.listen;e.gossiped&&this.currentServer.listen!==r&&void 0===o.get(r)&&a.push(t),o.delete(r)}),a.reverse(),a.forEach(e=>{let t=this.servers.splice(e,1);i=i.concat(t[0].listen)}),o.forEach((e,t)=>{this.servers.push(e),r.push(t)}),{added:r,deleted:i}}}t.Servers=h},8700:(e,t,r)=>{"use strict";let s;Object.defineProperty(t,"__esModule",{value:!0}),t.LF=t.CR=t.CRLF=t.CR_LF_LEN=t.CR_LF=void 0,t.setTransportFactory=function(e){s=e},t.defaultPort=function(){return void 0!==s&&void 0!==s.defaultPort?s.defaultPort:n.DEFAULT_PORT},t.getUrlParseFn=function(){return void 0!==s&&s.urlParseFn?s.urlParseFn:void 0},t.newTransport=function(){if(!s||"function"!=typeof s.factory)throw Error("transport fn is not set");return s.factory()},t.getResolveFn=function(){return void 0!==s&&s.dnsResolveFn?s.dnsResolveFn:void 0},t.protoLen=a,t.extractProtocolMessage=function(e){let t=a(e);if(t>0){let r=new Uint8Array(e).slice(0,t);return i.TD.decode(r)}return""};let i=r(1634),n=r(4320),o=r(7721);function a(e){for(let r=0;r<e.length;r++){let s=r+1;if(e.byteLength>s&&e[r]===t.CR&&e[s]===t.LF)return s+1}return 0}t.CR_LF="\r\n",t.CR_LF_LEN=t.CR_LF.length,t.CRLF=o.DataBuffer.fromAscii(t.CR_LF),t.CR=new Uint8Array(t.CRLF)[0],t.LF=new Uint8Array(t.CRLF)[1]},2724:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Empty=void 0;var s=r(1634);Object.defineProperty(t,"Empty",{enumerable:!0,get:function(){return s.Empty}})},4731:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleMutex=t.Perf=void 0,t.extend=function(e,...t){for(let r=0;r<t.length;r++){let s=t[r];Object.keys(s).forEach(function(t){e[t]=s[t]})}return e},t.render=function(e){return s.TD.decode(e).replace(/\n/g,"␊").replace(/\r/g,"␍")},t.timeout=function(e,t=!0){let r,s;let n=t?new i.TimeoutError:null;return Object.assign(new Promise((t,o)=>{r={cancel:()=>{s&&clearTimeout(s)}},s=setTimeout(()=>{null===n?o(new i.TimeoutError):o(n)},e)}),r)},t.delay=function(e=0){let t;return Object.assign(new Promise(r=>{let s=setTimeout(()=>{r()},e);t={cancel:()=>{s&&(clearTimeout(s),r())}}}),t)},t.deadline=n,t.deferred=o,t.debugDeferred=function(){let e={};return Object.assign(new Promise((t,r)=>{e={resolve:e=>{console.trace("resolve",e),t(e)},reject:e=>{console.trace("reject"),r(e)}}}),e)},t.shuffle=function(e){for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e},t.collect=a,t.jitter=h,t.backoff=function(e=[0,250,250,500,500,3e3,5e3]){Array.isArray(e)||(e=[0,250,250,500,500,3e3,5e3]);let t=e.length-1;return{backoff:r=>h(r>t?e[t]:e[r])}},t.nanos=function(e){return 1e6*e},t.millis=function(e){return Math.floor(e/1e6)};let s=r(1634),i=r(6008);async function n(e,t=1e3){let r=o(),s=setTimeout(()=>{r.reject(new i.TimeoutError)},t);try{return await Promise.race([e,r])}finally{clearTimeout(s)}}function o(){let e={};return Object.assign(new Promise((t,r)=>{e={resolve:t,reject:r}}),e)}async function a(e){let t=[];for await(let r of e)t.push(r);return t}class c{timers;measures;constructor(){this.timers=new Map,this.measures=new Map}mark(e){this.timers.set(e,performance.now())}measure(e,t,r){let s=this.timers.get(t);if(void 0===s)throw Error(`${t} is not defined`);let i=this.timers.get(r);if(void 0===i)throw Error(`${r} is not defined`);this.measures.set(e,i-s)}getEntries(){let e=[];return this.measures.forEach((t,r)=>{e.push({name:r,duration:t})}),e}}t.Perf=c;class u{max;current;waiting;constructor(e=1){this.max=e,this.current=0,this.waiting=[]}lock(){if(this.current++,this.current<=this.max)return Promise.resolve();let e=o();return this.waiting.push(e),e}unlock(){this.current--;let e=this.waiting.pop();e?.resolve()}}function h(e){return 0===e?0:Math.floor(e/2+Math.random()*e)}t.SimpleMutex=u},3965:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="3.0.0-48"},7695:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WsTransport=void 0,t.wsUrlParseFn=f,t.wsconnect=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.setTransportFactory)({defaultPort:443,urlParseFn:f,factory:()=>{if(e.tls)throw h.InvalidArgumentError.format("tls","is not configurable on w3c websocket connections");return new d}}),c.NatsConnectionImpl.connect(e)};let s=r(4731),i=r(8700),n=r(911),o=r(7721),a=r(8159),c=r(807),u=r(3965),h=r(6008),l=u.version;class d{async connect(e,t){let r=(0,s.deferred)();this.options=t;let c=e.src;if(t.wsFactory){let{socket:r,encrypted:s}=await t.wsFactory(e.src,t);this.socket=r,this.encrypted=s}else this.encrypted=0===c.indexOf("wss://"),this.socket=new WebSocket(c);return this.socket.binaryType="arraybuffer",this.socket.onopen=()=>{this.done&&this._closed(Error("aborted"))},this.socket.onmessage=e=>{if(this.done)return;if(this.yields.push(new Uint8Array(e.data)),this.peeked){this.signal.resolve();return}let c=o.DataBuffer.concat(...this.yields),u=(0,i.extractProtocolMessage)(c);if(""!==u){let e=a.INFO.exec(u);if(!e){t.debug&&console.error("!!!",(0,s.render)(c)),r.reject(Error("unexpected response from server"));return}try{let t=JSON.parse(e[1]);(0,n.checkOptions)(t,this.options),this.peeked=!0,this.connected=!0,this.signal.resolve(),r.resolve()}catch(e){r.reject(e);return}}},this.socket.onclose=e=>{let t;this.socketClosed=!0,e.wasClean||""===e.reason||(t=Error(e.reason)),this._closed(t),this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.closedNotification.resolve(this.closeError)},this.socket.onerror=e=>{if(this.done)return;let t=new h.errors.ConnectionError(e.message);r.reject(t)},r}disconnect(){this._closed(void 0,!0)}async _closed(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.done){try{this.socket.close()}catch(e){}return}if(this.closeError=e,!e)for(;!this.socketClosed&&this.socket.bufferedAmount>0;)await (0,s.delay)(100);this.done=!0;try{this.socket.close()}catch(e){}return this.closedNotification}get isClosed(){return this.done}[Symbol.asyncIterator](){return this.iterate()}async *iterate(){for(;;){if(this.done)return;0===this.yields.length&&await this.signal;let e=this.yields;this.yields=[];for(let t=0;t<e.length;t++)this.options.debug&&console.info("> ".concat((0,s.render)(e[t]))),yield e[t];if(this.done)break;0===this.yields.length&&(e.length=0,this.yields=e,this.signal=(0,s.deferred)())}}isEncrypted(){return this.connected&&this.encrypted}send(e){if(!this.done)try{this.socket.send(e.buffer),this.options.debug&&console.info("< ".concat((0,s.render)(e)));return}catch(t){this.options.debug&&console.error("!!! ".concat((0,s.render)(e),": ").concat(t))}}close(e){return this._closed(e,!1)}closed(){return this.closedNotification}discard(){var e;null===(e=this.socket)||void 0===e||e.close()}constructor(){this.version=l,this.lang="nats.ws",this.connected=!1,this.done=!1,this.socketClosed=!1,this.encrypted=!1,this.peeked=!1,this.yields=[],this.signal=(0,s.deferred)(),this.closedNotification=(0,s.deferred)()}}function f(e,t){let r,s;/^(.*:\/\/)(.*)/.test(e)||(e="boolean"==typeof t?"".concat(!0===t?"https":"http","://").concat(e):"https://".concat(e));let i=new URL(e),n=i.protocol.toLowerCase();"ws:"===n&&(t=!1),"wss:"===n&&(t=!0),"https:"!==n&&"http"!==n&&(e=e.replace(/^(.*:\/\/)(.*)/gm,"$2"),i=new URL("http://".concat(e)));let o=i.hostname,a=i.pathname,c=i.search||"";switch(n){case"http:":case"ws:":case"nats:":s=i.port||"80",r="ws:";break;case"https:":case"wss:":case"tls:":s=i.port||"443",r="wss:";break;default:s=i.port||!0===t?"443":"80",r=!0===t?"wss:":"ws:"}return"".concat(r,"//").concat(o,":").concat(s).concat(a).concat(c)}t.WsTransport=d},9849:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.base32=void 0;let r="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";class s{static encode(e){let t=0,s=0,i=new Uint8Array(e),n=new Uint8Array(2*e.byteLength),o=0;for(let e=0;e<i.byteLength;e++)for(s=s<<8|i[e],t+=8;t>=5;){let e=s>>>t-5&31;n[o++]=r.charAt(e).charCodeAt(0),t-=5}if(t>0){let e=s<<5-t&31;n[o++]=r.charAt(e).charCodeAt(0)}return n.slice(0,o)}static decode(e){let t=0,s=0,i=0,n=new Uint8Array(e),o=new Uint8Array(5*n.byteLength/8|0);for(let e=0;e<n.byteLength;e++){let a=String.fromCharCode(n[e]),c=r.indexOf(a);if(-1===c)throw Error("Illegal Base32 character: "+n[e]);s=s<<5|c,(t+=5)>=8&&(o[i++]=s>>>t-8&255,t-=8)}return o.slice(0,i)}}t.base32=s},1013:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Codec=void 0;let s=r(8894),i=r(209),n=r(9849);class o{static encode(e,t){if(!t||!(t instanceof Uint8Array))throw new i.NKeysError(i.NKeysErrorCode.SerializationError);if(!i.Prefixes.isValidPrefix(e))throw new i.NKeysError(i.NKeysErrorCode.InvalidPrefixByte);return o._encode(!1,e,t)}static encodeSeed(e,t){if(!t)throw new i.NKeysError(i.NKeysErrorCode.ApiError);if(!i.Prefixes.isValidPublicPrefix(e))throw new i.NKeysError(i.NKeysErrorCode.InvalidPrefixByte);if(32!==t.byteLength)throw new i.NKeysError(i.NKeysErrorCode.InvalidSeedLen);return o._encode(!0,e,t)}static decode(e,t){if(!i.Prefixes.isValidPrefix(e))throw new i.NKeysError(i.NKeysErrorCode.InvalidPrefixByte);let r=o._decode(t);if(r[0]!==e)throw new i.NKeysError(i.NKeysErrorCode.InvalidPrefixByte);return r.slice(1)}static decodeSeed(e){let t=o._decode(e),r=o._decodePrefix(t);if(r[0]!=i.Prefix.Seed)throw new i.NKeysError(i.NKeysErrorCode.InvalidSeed);if(!i.Prefixes.isValidPublicPrefix(r[1]))throw new i.NKeysError(i.NKeysErrorCode.InvalidPrefixByte);return{buf:t.slice(2),prefix:r[1]}}static _encode(e,t,r){let a=e?2:1,c=r.byteLength,u=a+c,h=new Uint8Array(a+c+2);if(e){let e=o._encodePrefix(i.Prefix.Seed,t);h.set(e)}else h[0]=t;h.set(r,a);let l=s.crc16.checksum(h.slice(0,u));return new DataView(h.buffer).setUint16(u,l,!0),n.base32.encode(h)}static _decode(e){let t;if(e.byteLength<4)throw new i.NKeysError(i.NKeysErrorCode.InvalidEncoding);try{t=n.base32.decode(e)}catch(e){throw new i.NKeysError(i.NKeysErrorCode.InvalidEncoding,{cause:e})}let r=t.byteLength-2,o=new DataView(t.buffer).getUint16(r,!0),a=t.slice(0,r);if(!s.crc16.validate(a,o))throw new i.NKeysError(i.NKeysErrorCode.InvalidChecksum);return a}static _encodePrefix(e,t){return new Uint8Array([e|t>>5,(31&t)<<3])}static _decodePrefix(e){return new Uint8Array([248&e[0],(7&e[0])<<5|(248&e[1])>>3])}}t.Codec=o},8894:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crc16=void 0;let r=new Uint16Array([0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920]);class s{static checksum(e){let t=0;for(let s=0;s<e.byteLength;s++)t=t<<8&65535^r[(t>>8^e[s])&255];return t}static validate(e,t){return s.checksum(e)==t}}t.crc16=s},4792:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CurveKP=t.curveNonceLen=t.curveKeyLen=void 0;let i=r(209),n=s(r(5619)),o=r(1013),a=r(209),c=r(9849),u=r(8894);t.curveKeyLen=32,t.curveNonceLen=24;let h=[120,107,118,49];class l{seed;constructor(e){this.seed=e}clear(){this.seed&&(this.seed.fill(0),this.seed=void 0)}getPrivateKey(){if(!this.seed)throw new i.NKeysError(i.NKeysErrorCode.ClearedPair);return o.Codec.encode(a.Prefix.Private,this.seed)}getPublicKey(){if(!this.seed)throw new i.NKeysError(i.NKeysErrorCode.ClearedPair);let e=n.default.scalarMult.base(this.seed),t=o.Codec.encode(a.Prefix.Curve,e);return new TextDecoder().decode(t)}getSeed(){if(!this.seed)throw new i.NKeysError(i.NKeysErrorCode.ClearedPair);return o.Codec.encodeSeed(a.Prefix.Curve,this.seed)}sign(){throw new i.NKeysError(i.NKeysErrorCode.InvalidCurveOperation)}verify(){throw new i.NKeysError(i.NKeysErrorCode.InvalidCurveOperation)}decodePubCurveKey(e){try{let t=c.base32.decode(new TextEncoder().encode(e));if(35!==t.byteLength)throw new i.NKeysError(i.NKeysErrorCode.InvalidCurveKey);if(t[0]!==a.Prefix.Curve)throw new i.NKeysError(i.NKeysErrorCode.InvalidPublicKey);let r=t.byteLength-2,s=new DataView(t.buffer).getUint16(r,!0),n=t.slice(0,r);if(!u.crc16.validate(n,s))throw new i.NKeysError(i.NKeysErrorCode.InvalidChecksum);return n.slice(1)}catch(e){throw new i.NKeysError(i.NKeysErrorCode.InvalidRecipient,{cause:e})}}seal(e,r,s){if(!this.seed)throw new i.NKeysError(i.NKeysErrorCode.ClearedPair);s||(s=n.default.randomBytes(t.curveNonceLen));let o=this.decodePubCurveKey(r),a=new Uint8Array(h.length+t.curveNonceLen);a.set(h,0),a.set(s,h.length);let c=n.default.box(e,s,o,this.seed),u=new Uint8Array(a.length+c.length);return u.set(a),u.set(c,a.length),u}open(e,r){if(!this.seed)throw new i.NKeysError(i.NKeysErrorCode.ClearedPair);if(e.length<=t.curveNonceLen+h.length)throw new i.NKeysError(i.NKeysErrorCode.InvalidEncrypted);for(let t=0;t<h.length;t++)if(e[t]!==h[t])throw new i.NKeysError(i.NKeysErrorCode.InvalidEncrypted);let s=this.decodePubCurveKey(r),o=(e=e.slice(h.length)).slice(0,t.curveNonceLen);return e=e.slice(t.curveNonceLen),n.default.box.open(e,o,s,this.seed)}}t.CurveKP=l},2698:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.KP=void 0;let i=r(1013),n=r(209),o=s(r(5619));class a{seed;constructor(e){this.seed=e}getRawSeed(){if(!this.seed)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);return i.Codec.decodeSeed(this.seed).buf}getSeed(){if(!this.seed)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);return this.seed}getPublicKey(){if(!this.seed)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);let e=i.Codec.decodeSeed(this.seed),t=o.default.sign.keyPair.fromSeed(this.getRawSeed()),r=i.Codec.encode(e.prefix,t.publicKey);return new TextDecoder().decode(r)}getPrivateKey(){if(!this.seed)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);let e=o.default.sign.keyPair.fromSeed(this.getRawSeed());return i.Codec.encode(n.Prefix.Private,e.secretKey)}sign(e){if(!this.seed)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);let t=o.default.sign.keyPair.fromSeed(this.getRawSeed());return o.default.sign.detached(e,t.secretKey)}verify(e,t){if(!this.seed)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);let r=o.default.sign.keyPair.fromSeed(this.getRawSeed());return o.default.sign.detached.verify(e,t,r.publicKey)}clear(){this.seed&&(this.seed.fill(0),this.seed=void 0)}seal(e,t,r){throw new n.NKeysError(n.NKeysErrorCode.InvalidNKeyOperation)}open(e,t){throw new n.NKeysError(n.NKeysErrorCode.InvalidNKeyOperation)}}t.KP=a},3279:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.encode=t.decode=t.Prefix=t.NKeysErrorCode=t.NKeysError=t.fromSeed=t.fromPublic=t.fromCurveSeed=t.createUser=t.createServer=t.createPair=t.createOperator=t.createCurve=t.createCluster=t.createAccount=void 0;var s=r(209);Object.defineProperty(t,"createAccount",{enumerable:!0,get:function(){return s.createAccount}}),Object.defineProperty(t,"createCluster",{enumerable:!0,get:function(){return s.createCluster}}),Object.defineProperty(t,"createCurve",{enumerable:!0,get:function(){return s.createCurve}}),Object.defineProperty(t,"createOperator",{enumerable:!0,get:function(){return s.createOperator}}),Object.defineProperty(t,"createPair",{enumerable:!0,get:function(){return s.createPair}}),Object.defineProperty(t,"createServer",{enumerable:!0,get:function(){return s.createServer}}),Object.defineProperty(t,"createUser",{enumerable:!0,get:function(){return s.createUser}}),Object.defineProperty(t,"fromCurveSeed",{enumerable:!0,get:function(){return s.fromCurveSeed}}),Object.defineProperty(t,"fromPublic",{enumerable:!0,get:function(){return s.fromPublic}}),Object.defineProperty(t,"fromSeed",{enumerable:!0,get:function(){return s.fromSeed}}),Object.defineProperty(t,"NKeysError",{enumerable:!0,get:function(){return s.NKeysError}}),Object.defineProperty(t,"NKeysErrorCode",{enumerable:!0,get:function(){return s.NKeysErrorCode}}),Object.defineProperty(t,"Prefix",{enumerable:!0,get:function(){return s.Prefix}});var i=r(7537);Object.defineProperty(t,"decode",{enumerable:!0,get:function(){return i.decode}}),Object.defineProperty(t,"encode",{enumerable:!0,get:function(){return i.encode}});var n=r(8459);Object.defineProperty(t,"version",{enumerable:!0,get:function(){return n.version}})},5619:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=s(r(7734));t.default=i.default},209:function(e,t,r){"use strict";var s,i,n,o,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NKeysError=t.NKeysErrorCode=t.Prefixes=t.Prefix=void 0,t.createPair=f,t.createOperator=function(){return f(n.Operator)},t.createAccount=function(){return f(n.Account)},t.createUser=function(){return f(n.User)},t.createCluster=function(){return f(n.Cluster)},t.createServer=function(){return f(n.Server)},t.createCurve=function(){return f(n.Curve)},t.fromPublic=function(e){let t=new TextEncoder().encode(e),r=h.Codec._decode(t),s=b.parsePrefix(r[0]);if(b.isValidPublicPrefix(s))return new u.PublicKey(t);throw new y(o.InvalidPublicKey)},t.fromCurveSeed=p,t.fromSeed=function(e){return h.Codec.decodeSeed(e).prefix===n.Curve?p(e):new c.KP(e)};let c=r(2698),u=r(5644),h=r(1013),l=r(4792),d=a(r(5619));function f(e){let t=e===n.Curve?l.curveKeyLen:32,r=d.default.randomBytes(t),s=h.Codec.encodeSeed(e,new Uint8Array(r));return e===n.Curve?new l.CurveKP(new Uint8Array(r)):new c.KP(s)}function p(e){let t=h.Codec.decodeSeed(e);if(t.prefix!==n.Curve)throw new y(o.InvalidCurveSeed);if(t.buf.byteLength!==l.curveKeyLen)throw new y(o.InvalidSeedLen);return new l.CurveKP(t.buf)}(s=n||(t.Prefix=n={}))[s.Unknown=-1]="Unknown",s[s.Seed=144]="Seed",s[s.Private=120]="Private",s[s.Operator=112]="Operator",s[s.Server=104]="Server",s[s.Cluster=16]="Cluster",s[s.Account=0]="Account",s[s.User=160]="User",s[s.Curve=184]="Curve";class b{static isValidPublicPrefix(e){return e==n.Server||e==n.Operator||e==n.Cluster||e==n.Account||e==n.User||e==n.Curve}static startsWithValidPrefix(e){let t=e[0];return"S"==t||"P"==t||"O"==t||"N"==t||"C"==t||"A"==t||"U"==t||"X"==t}static isValidPrefix(e){return this.parsePrefix(e)!==n.Unknown}static parsePrefix(e){switch(e){case n.Seed:return n.Seed;case n.Private:return n.Private;case n.Operator:return n.Operator;case n.Server:return n.Server;case n.Cluster:return n.Cluster;case n.Account:return n.Account;case n.User:return n.User;case n.Curve:return n.Curve;default:return n.Unknown}}}t.Prefixes=b,(i=o||(t.NKeysErrorCode=o={})).InvalidPrefixByte="nkeys: invalid prefix byte",i.InvalidKey="nkeys: invalid key",i.InvalidPublicKey="nkeys: invalid public key",i.InvalidSeedLen="nkeys: invalid seed length",i.InvalidSeed="nkeys: invalid seed",i.InvalidCurveSeed="nkeys: invalid curve seed",i.InvalidCurveKey="nkeys: not a valid curve key",i.InvalidCurveOperation="nkeys: curve key is not valid for sign/verify",i.InvalidNKeyOperation="keys: only curve key can seal/open",i.InvalidEncoding="nkeys: invalid encoded key",i.InvalidRecipient="nkeys: not a valid recipient public curve key",i.InvalidEncrypted="nkeys: encrypted input is not valid",i.CannotSign="nkeys: cannot sign, no private key available",i.PublicKeyOnly="nkeys: no seed or private key available",i.InvalidChecksum="nkeys: invalid checksum",i.SerializationError="nkeys: serialization error",i.ApiError="nkeys: api error",i.ClearedPair="nkeys: pair is cleared";class y extends Error{code;constructor(e,t){super(e,t),this.code=e}}t.NKeysError=y},5644:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=void 0;let i=r(1013),n=r(209),o=s(r(5619));class a{publicKey;constructor(e){this.publicKey=e}getPublicKey(){if(!this.publicKey)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);return new TextDecoder().decode(this.publicKey)}getPrivateKey(){if(!this.publicKey)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);throw new n.NKeysError(n.NKeysErrorCode.PublicKeyOnly)}getSeed(){if(!this.publicKey)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);throw new n.NKeysError(n.NKeysErrorCode.PublicKeyOnly)}sign(e){if(!this.publicKey)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);throw new n.NKeysError(n.NKeysErrorCode.CannotSign)}verify(e,t){if(!this.publicKey)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);let r=i.Codec._decode(this.publicKey);return o.default.sign.detached.verify(e,t,r.slice(1))}clear(){this.publicKey&&(this.publicKey.fill(0),this.publicKey=void 0)}seal(e,t,r){throw new n.NKeysError(n.NKeysErrorCode.InvalidNKeyOperation)}open(e,t){throw new n.NKeysError(n.NKeysErrorCode.InvalidNKeyOperation)}}t.PublicKey=a},7537:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encode=function(e){return btoa(String.fromCharCode(...e))},t.decode=function(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r},t.dump=function(e,t){t&&console.log(t);let r=[];for(let t=0;t<e.byteLength;t++){t%8==0&&r.push("\n");let s=e[t].toString(16);1===s.length&&(s="0"+s),r.push(s)}console.log(r.join("  "))}},8459:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="2.0.0-3"},1625:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nuid=t.Nuid=void 0;let r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";class s{buf;seq;inc;inited;constructor(){this.buf=new Uint8Array(22),this.inited=!1}init(){this.inited=!0,this.setPre(),this.initSeqAndInc(),this.fillSeq()}initSeqAndInc(){this.seq=Math.floor(0xcfd41b9100000*Math.random()),this.inc=Math.floor(300*Math.random()+33)}setPre(){let e=new Uint8Array(12);globalThis?.crypto?.getRandomValues?globalThis.crypto.getRandomValues(e):function(e){for(let t=0;t<e.length;t++)e[t]=Math.floor(255*Math.random())}(e);for(let t=0;t<12;t++){let s=e[t]%36;this.buf[t]=r.charCodeAt(s)}}fillSeq(){let e=this.seq;for(let t=21;t>=12;t--)this.buf[t]=r.charCodeAt(e%36),e=Math.floor(e/36)}next(){return this.inited||this.init(),this.seq+=this.inc,this.seq>0xcfd41b9100000&&(this.setPre(),this.initSeqAndInc()),this.fillSeq(),String.fromCharCode.apply(String,this.buf)}reset(){this.init()}}t.Nuid=s,t.nuid=new s},789:(e,t,r)=>{"use strict";r.d(t,{default:()=>i.a});var s=r(4664),i=r.n(s)},4664:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let s=r(5432),i=r(4436),n=r(3199),o=r(6205),a=r(5828),c=r(7981),u=r(4408),h=r(1887),l=["method","encType","target"];function d(e){let{replace:t,scroll:r,prefetch:d,ref:g,...m}=e,_=function(){let e=(0,i.useContext)(h.RouterContext),t=(0,i.useContext)(c.AppRouterContext);return e||t}(),v=m.action,P="string"==typeof v,E=!1===d||null===d?d:null;for(let e of l)e in m&&delete m[e];let w=f(_)&&P&&null===E,[O,S]=(0,o.useIntersection)({rootMargin:"200px",disabled:!w}),x=(0,a.useMergedRef)(O,null!=g?g:null);if((0,i.useEffect)(()=>{if(S&&w)try{let e=u.PrefetchKind.AUTO;_.prefetch(v,{kind:e})}catch(e){console.error(e)}},[w,S,v,E,_]),!P)return(0,s.jsx)("form",{...m,ref:x});let A=(0,n.addBasePath)(v);return(0,s.jsx)("form",{...m,ref:x,action:A,onSubmit:e=>(function(e,t){let r,{actionHref:s,onSubmit:i,replace:n,scroll:o,router:a}=t;if("function"==typeof i&&(i(e),e.defaultPrevented))return;let c=e.currentTarget,u=e.nativeEvent.submitter,h=s;if(u){if(function(e){let t=e.getAttribute("formEncType");if(null!==t&&!p(t))return!0;let r=e.getAttribute("formMethod");if(null!==r&&!b(r))return!0;let s=e.getAttribute("formTarget");return!(null===s||y(s))}(u)||function(e){let t=e.getAttribute("formAction");return t&&/\s*javascript:/i.test(t)}(u))return;let e=u.getAttribute("formAction");null!==e&&(h=e)}try{let e=window.location.href;r=new URL(h,e)}catch(e){throw Error('Cannot parse form action "'+h+'" as a URL',{cause:e})}for(let[e,t]of(r.searchParams.size&&(r.search=""),new FormData(c)))"string"!=typeof t&&(t=t.name),r.searchParams.append(e,t);e.preventDefault();let l=n?"replace":"push",d=r.href;f(a)?a[l](d,{scroll:o}):a[l](d,void 0,{scroll:o})})(e,{router:_,actionHref:A,replace:t,scroll:r,onSubmit:m.onSubmit})})}function f(e){return!("asPath"in e)}let p=e=>"application/x-www-form-urlencoded"===e,b=e=>"get"===e,y=e=>"_self"===e;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9300:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{cancelIdleCallback:function(){return s},requestIdleCallback:function(){return r}});let r="undefined"!=typeof self&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(e){let t=Date.now();return self.setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},s="undefined"!=typeof self&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function(e){return clearTimeout(e)};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6205:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return c}});let s=r(4436),i=r(9300),n="function"==typeof IntersectionObserver,o=new Map,a=[];function c(e){let{rootRef:t,rootMargin:r,disabled:c}=e,u=c||!n,[h,l]=(0,s.useState)(!1),d=(0,s.useRef)(null),f=(0,s.useCallback)(e=>{d.current=e},[]);return(0,s.useEffect)(()=>{if(n){if(u||h)return;let e=d.current;if(e&&e.tagName)return function(e,t,r){let{id:s,observer:i,elements:n}=function(e){let t;let r={root:e.root||null,margin:e.rootMargin||""},s=a.find(e=>e.root===r.root&&e.margin===r.margin);if(s&&(t=o.get(s)))return t;let i=new Map;return t={id:r,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=i.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)})},e),elements:i},a.push(r),o.set(r,t),t}(r);return n.set(e,t),i.observe(e),function(){if(n.delete(e),i.unobserve(e),0===n.size){i.disconnect(),o.delete(s);let e=a.findIndex(e=>e.root===s.root&&e.margin===s.margin);e>-1&&a.splice(e,1)}}}(e,e=>e&&l(e),{root:null==t?void 0:t.current,rootMargin:r})}else if(!h){let e=(0,i.requestIdleCallback)(()=>l(!0));return()=>(0,i.cancelIdleCallback)(e)}},[u,r,t,h,d.current]),[f,h,(0,s.useCallback)(()=>{l(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return i}});let s=r(4436);function i(e,t){let r=(0,s.useRef)(()=>{}),i=(0,s.useRef)(()=>{});return(0,s.useMemo)(()=>e&&t?s=>{null===s?(r.current(),i.current()):(r.current=n(e,s),i.current=n(t,s))}:e||t,[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1887:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return s}});let s=r(3818)._(r(4436)).default.createContext(null)},7734:(e,t,r)=>{!function(e){"use strict";var t,s=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},i=function(){throw Error("no PRNG")},n=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var a=s(),c=s([1]),u=s([56129,1]),h=s([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=s([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=s([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=s([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=s([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function b(e,t,r,s){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=s>>24&255,e[t+5]=s>>16&255,e[t+6]=s>>8&255,e[t+7]=255&s}function y(e,t,r,s,i){var n,o=0;for(n=0;n<i;n++)o|=e[t+n]^r[s+n];return(1&o-1>>>8)-1}function g(e,t,r,s){return y(e,t,r,s,16)}function m(e,t,r,s){return y(e,t,r,s,32)}function _(e,t,r,s){!function(e,t,r,s){for(var i,n=255&s[0]|(255&s[1])<<8|(255&s[2])<<16|(255&s[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,h=255&s[4]|(255&s[5])<<8|(255&s[6])<<16|(255&s[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,b=255&s[8]|(255&s[9])<<8|(255&s[10])<<16|(255&s[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,g=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,m=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,_=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,v=255&s[12]|(255&s[13])<<8|(255&s[14])<<16|(255&s[15])<<24,P=n,E=o,w=a,O=c,S=u,x=h,A=l,C=d,M=f,I=p,N=b,k=y,T=g,j=m,R=_,U=v,L=0;L<20;L+=2)S^=(i=P+T|0)<<7|i>>>25,M^=(i=S+P|0)<<9|i>>>23,T^=(i=M+S|0)<<13|i>>>19,P^=(i=T+M|0)<<18|i>>>14,I^=(i=x+E|0)<<7|i>>>25,j^=(i=I+x|0)<<9|i>>>23,E^=(i=j+I|0)<<13|i>>>19,x^=(i=E+j|0)<<18|i>>>14,R^=(i=N+A|0)<<7|i>>>25,w^=(i=R+N|0)<<9|i>>>23,A^=(i=w+R|0)<<13|i>>>19,N^=(i=A+w|0)<<18|i>>>14,O^=(i=U+k|0)<<7|i>>>25,C^=(i=O+U|0)<<9|i>>>23,k^=(i=C+O|0)<<13|i>>>19,U^=(i=k+C|0)<<18|i>>>14,E^=(i=P+O|0)<<7|i>>>25,w^=(i=E+P|0)<<9|i>>>23,O^=(i=w+E|0)<<13|i>>>19,P^=(i=O+w|0)<<18|i>>>14,A^=(i=x+S|0)<<7|i>>>25,C^=(i=A+x|0)<<9|i>>>23,S^=(i=C+A|0)<<13|i>>>19,x^=(i=S+C|0)<<18|i>>>14,k^=(i=N+I|0)<<7|i>>>25,M^=(i=k+N|0)<<9|i>>>23,I^=(i=M+k|0)<<13|i>>>19,N^=(i=I+M|0)<<18|i>>>14,T^=(i=U+R|0)<<7|i>>>25,j^=(i=T+U|0)<<9|i>>>23,R^=(i=j+T|0)<<13|i>>>19,U^=(i=R+j|0)<<18|i>>>14;P=P+n|0,E=E+o|0,w=w+a|0,O=O+c|0,S=S+u|0,x=x+h|0,A=A+l|0,C=C+d|0,M=M+f|0,I=I+p|0,N=N+b|0,k=k+y|0,T=T+g|0,j=j+m|0,R=R+_|0,U=U+v|0,e[0]=P>>>0&255,e[1]=P>>>8&255,e[2]=P>>>16&255,e[3]=P>>>24&255,e[4]=E>>>0&255,e[5]=E>>>8&255,e[6]=E>>>16&255,e[7]=E>>>24&255,e[8]=w>>>0&255,e[9]=w>>>8&255,e[10]=w>>>16&255,e[11]=w>>>24&255,e[12]=O>>>0&255,e[13]=O>>>8&255,e[14]=O>>>16&255,e[15]=O>>>24&255,e[16]=S>>>0&255,e[17]=S>>>8&255,e[18]=S>>>16&255,e[19]=S>>>24&255,e[20]=x>>>0&255,e[21]=x>>>8&255,e[22]=x>>>16&255,e[23]=x>>>24&255,e[24]=A>>>0&255,e[25]=A>>>8&255,e[26]=A>>>16&255,e[27]=A>>>24&255,e[28]=C>>>0&255,e[29]=C>>>8&255,e[30]=C>>>16&255,e[31]=C>>>24&255,e[32]=M>>>0&255,e[33]=M>>>8&255,e[34]=M>>>16&255,e[35]=M>>>24&255,e[36]=I>>>0&255,e[37]=I>>>8&255,e[38]=I>>>16&255,e[39]=I>>>24&255,e[40]=N>>>0&255,e[41]=N>>>8&255,e[42]=N>>>16&255,e[43]=N>>>24&255,e[44]=k>>>0&255,e[45]=k>>>8&255,e[46]=k>>>16&255,e[47]=k>>>24&255,e[48]=T>>>0&255,e[49]=T>>>8&255,e[50]=T>>>16&255,e[51]=T>>>24&255,e[52]=j>>>0&255,e[53]=j>>>8&255,e[54]=j>>>16&255,e[55]=j>>>24&255,e[56]=R>>>0&255,e[57]=R>>>8&255,e[58]=R>>>16&255,e[59]=R>>>24&255,e[60]=U>>>0&255,e[61]=U>>>8&255,e[62]=U>>>16&255,e[63]=U>>>24&255}(e,t,r,s)}function v(e,t,r,s){!function(e,t,r,s){for(var i,n=255&s[0]|(255&s[1])<<8|(255&s[2])<<16|(255&s[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,h=255&s[4]|(255&s[5])<<8|(255&s[6])<<16|(255&s[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,b=255&s[8]|(255&s[9])<<8|(255&s[10])<<16|(255&s[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,g=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,m=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,_=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,v=255&s[12]|(255&s[13])<<8|(255&s[14])<<16|(255&s[15])<<24,P=n,E=o,w=a,O=c,S=u,x=h,A=l,C=d,M=f,I=p,N=b,k=y,T=g,j=m,R=_,U=v,L=0;L<20;L+=2)S^=(i=P+T|0)<<7|i>>>25,M^=(i=S+P|0)<<9|i>>>23,T^=(i=M+S|0)<<13|i>>>19,P^=(i=T+M|0)<<18|i>>>14,I^=(i=x+E|0)<<7|i>>>25,j^=(i=I+x|0)<<9|i>>>23,E^=(i=j+I|0)<<13|i>>>19,x^=(i=E+j|0)<<18|i>>>14,R^=(i=N+A|0)<<7|i>>>25,w^=(i=R+N|0)<<9|i>>>23,A^=(i=w+R|0)<<13|i>>>19,N^=(i=A+w|0)<<18|i>>>14,O^=(i=U+k|0)<<7|i>>>25,C^=(i=O+U|0)<<9|i>>>23,k^=(i=C+O|0)<<13|i>>>19,U^=(i=k+C|0)<<18|i>>>14,E^=(i=P+O|0)<<7|i>>>25,w^=(i=E+P|0)<<9|i>>>23,O^=(i=w+E|0)<<13|i>>>19,P^=(i=O+w|0)<<18|i>>>14,A^=(i=x+S|0)<<7|i>>>25,C^=(i=A+x|0)<<9|i>>>23,S^=(i=C+A|0)<<13|i>>>19,x^=(i=S+C|0)<<18|i>>>14,k^=(i=N+I|0)<<7|i>>>25,M^=(i=k+N|0)<<9|i>>>23,I^=(i=M+k|0)<<13|i>>>19,N^=(i=I+M|0)<<18|i>>>14,T^=(i=U+R|0)<<7|i>>>25,j^=(i=T+U|0)<<9|i>>>23,R^=(i=j+T|0)<<13|i>>>19,U^=(i=R+j|0)<<18|i>>>14;e[0]=P>>>0&255,e[1]=P>>>8&255,e[2]=P>>>16&255,e[3]=P>>>24&255,e[4]=x>>>0&255,e[5]=x>>>8&255,e[6]=x>>>16&255,e[7]=x>>>24&255,e[8]=N>>>0&255,e[9]=N>>>8&255,e[10]=N>>>16&255,e[11]=N>>>24&255,e[12]=U>>>0&255,e[13]=U>>>8&255,e[14]=U>>>16&255,e[15]=U>>>24&255,e[16]=A>>>0&255,e[17]=A>>>8&255,e[18]=A>>>16&255,e[19]=A>>>24&255,e[20]=C>>>0&255,e[21]=C>>>8&255,e[22]=C>>>16&255,e[23]=C>>>24&255,e[24]=M>>>0&255,e[25]=M>>>8&255,e[26]=M>>>16&255,e[27]=M>>>24&255,e[28]=I>>>0&255,e[29]=I>>>8&255,e[30]=I>>>16&255,e[31]=I>>>24&255}(e,t,r,s)}var P=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function E(e,t,r,s,i,n,o){var a,c,u=new Uint8Array(16),h=new Uint8Array(64);for(c=0;c<16;c++)u[c]=0;for(c=0;c<8;c++)u[c]=n[c];for(;i>=64;){for(_(h,u,o,P),c=0;c<64;c++)e[t+c]=r[s+c]^h[c];for(c=8,a=1;c<16;c++)a=a+(255&u[c])|0,u[c]=255&a,a>>>=8;i-=64,t+=64,s+=64}if(i>0)for(_(h,u,o,P),c=0;c<i;c++)e[t+c]=r[s+c]^h[c];return 0}function w(e,t,r,s,i){var n,o,a=new Uint8Array(16),c=new Uint8Array(64);for(o=0;o<16;o++)a[o]=0;for(o=0;o<8;o++)a[o]=s[o];for(;r>=64;){for(_(c,a,i,P),o=0;o<64;o++)e[t+o]=c[o];for(o=8,n=1;o<16;o++)n=n+(255&a[o])|0,a[o]=255&n,n>>>=8;r-=64,t+=64}if(r>0)for(_(c,a,i,P),o=0;o<r;o++)e[t+o]=c[o];return 0}function O(e,t,r,s,i){var n=new Uint8Array(32);v(n,s,i,P);for(var o=new Uint8Array(8),a=0;a<8;a++)o[a]=s[a+16];return w(e,t,r,o,n)}function S(e,t,r,s,i,n,o){var a=new Uint8Array(32);v(a,n,o,P);for(var c=new Uint8Array(8),u=0;u<8;u++)c[u]=n[u+16];return E(e,t,r,s,i,c,a)}var x=function(e){var t,r,s,i,n,o,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=(t>>>13|r<<3)&8191,s=255&e[4]|(255&e[5])<<8,this.r[2]=(r>>>10|s<<6)&7939,i=255&e[6]|(255&e[7])<<8,this.r[3]=(s>>>7|i<<9)&8191,n=255&e[8]|(255&e[9])<<8,this.r[4]=(i>>>4|n<<12)&255,this.r[5]=n>>>1&8190,o=255&e[10]|(255&e[11])<<8,this.r[6]=(n>>>14|o<<2)&8191,a=255&e[12]|(255&e[13])<<8,this.r[7]=(o>>>11|a<<5)&8065,c=255&e[14]|(255&e[15])<<8,this.r[8]=(a>>>8|c<<8)&8191,this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function A(e,t,r,s,i,n){var o=new x(n);return o.update(r,s,i),o.finish(e,t),0}function C(e,t,r,s,i,n){var o=new Uint8Array(16);return A(o,0,r,s,i,n),g(e,t,o,0)}function M(e,t,r,s,i){var n;if(r<32)return -1;for(S(e,0,t,0,r,s,i),A(e,16,e,32,r-32,e),n=0;n<16;n++)e[n]=0;return 0}function I(e,t,r,s,i){var n,o=new Uint8Array(32);if(r<32||(O(o,0,32,s,i),0!==C(t,16,t,32,r-32,o)))return -1;for(S(e,0,t,0,r,s,i),n=0;n<32;n++)e[n]=0;return 0}function N(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function k(e){var t,r,s=1;for(t=0;t<16;t++)s=Math.floor((r=e[t]+s+65535)/65536),e[t]=r-65536*s;e[0]+=s-1+37*(s-1)}function T(e,t,r){for(var s,i=~(r-1),n=0;n<16;n++)s=i&(e[n]^t[n]),e[n]^=s,t[n]^=s}function j(e,t){var r,i,n,o=s(),a=s();for(r=0;r<16;r++)a[r]=t[r];for(k(a),k(a),k(a),i=0;i<2;i++){for(r=1,o[0]=a[0]-65517;r<15;r++)o[r]=a[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),n=o[15]>>16&1,o[14]&=65535,T(a,o,1-n)}for(r=0;r<16;r++)e[2*r]=255&a[r],e[2*r+1]=a[r]>>8}function R(e,t){var r=new Uint8Array(32),s=new Uint8Array(32);return j(r,e),j(s,t),m(r,0,s,0)}function U(e){var t=new Uint8Array(32);return j(t,e),1&t[0]}function L(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function K(e,t,r){for(var s=0;s<16;s++)e[s]=t[s]+r[s]}function B(e,t,r){for(var s=0;s<16;s++)e[s]=t[s]-r[s]}function F(e,t,r){var s,i,n=0,o=0,a=0,c=0,u=0,h=0,l=0,d=0,f=0,p=0,b=0,y=0,g=0,m=0,_=0,v=0,P=0,E=0,w=0,O=0,S=0,x=0,A=0,C=0,M=0,I=0,N=0,k=0,T=0,j=0,R=0,U=r[0],L=r[1],K=r[2],B=r[3],F=r[4],D=r[5],q=r[6],$=r[7],G=r[8],z=r[9],H=r[10],J=r[11],V=r[12],Y=r[13],W=r[14],X=r[15];n+=(s=t[0])*U,o+=s*L,a+=s*K,c+=s*B,u+=s*F,h+=s*D,l+=s*q,d+=s*$,f+=s*G,p+=s*z,b+=s*H,y+=s*J,g+=s*V,m+=s*Y,_+=s*W,v+=s*X,o+=(s=t[1])*U,a+=s*L,c+=s*K,u+=s*B,h+=s*F,l+=s*D,d+=s*q,f+=s*$,p+=s*G,b+=s*z,y+=s*H,g+=s*J,m+=s*V,_+=s*Y,v+=s*W,P+=s*X,a+=(s=t[2])*U,c+=s*L,u+=s*K,h+=s*B,l+=s*F,d+=s*D,f+=s*q,p+=s*$,b+=s*G,y+=s*z,g+=s*H,m+=s*J,_+=s*V,v+=s*Y,P+=s*W,E+=s*X,c+=(s=t[3])*U,u+=s*L,h+=s*K,l+=s*B,d+=s*F,f+=s*D,p+=s*q,b+=s*$,y+=s*G,g+=s*z,m+=s*H,_+=s*J,v+=s*V,P+=s*Y,E+=s*W,w+=s*X,u+=(s=t[4])*U,h+=s*L,l+=s*K,d+=s*B,f+=s*F,p+=s*D,b+=s*q,y+=s*$,g+=s*G,m+=s*z,_+=s*H,v+=s*J,P+=s*V,E+=s*Y,w+=s*W,O+=s*X,h+=(s=t[5])*U,l+=s*L,d+=s*K,f+=s*B,p+=s*F,b+=s*D,y+=s*q,g+=s*$,m+=s*G,_+=s*z,v+=s*H,P+=s*J,E+=s*V,w+=s*Y,O+=s*W,S+=s*X,l+=(s=t[6])*U,d+=s*L,f+=s*K,p+=s*B,b+=s*F,y+=s*D,g+=s*q,m+=s*$,_+=s*G,v+=s*z,P+=s*H,E+=s*J,w+=s*V,O+=s*Y,S+=s*W,x+=s*X,d+=(s=t[7])*U,f+=s*L,p+=s*K,b+=s*B,y+=s*F,g+=s*D,m+=s*q,_+=s*$,v+=s*G,P+=s*z,E+=s*H,w+=s*J,O+=s*V,S+=s*Y,x+=s*W,A+=s*X,f+=(s=t[8])*U,p+=s*L,b+=s*K,y+=s*B,g+=s*F,m+=s*D,_+=s*q,v+=s*$,P+=s*G,E+=s*z,w+=s*H,O+=s*J,S+=s*V,x+=s*Y,A+=s*W,C+=s*X,p+=(s=t[9])*U,b+=s*L,y+=s*K,g+=s*B,m+=s*F,_+=s*D,v+=s*q,P+=s*$,E+=s*G,w+=s*z,O+=s*H,S+=s*J,x+=s*V,A+=s*Y,C+=s*W,M+=s*X,b+=(s=t[10])*U,y+=s*L,g+=s*K,m+=s*B,_+=s*F,v+=s*D,P+=s*q,E+=s*$,w+=s*G,O+=s*z,S+=s*H,x+=s*J,A+=s*V,C+=s*Y,M+=s*W,I+=s*X,y+=(s=t[11])*U,g+=s*L,m+=s*K,_+=s*B,v+=s*F,P+=s*D,E+=s*q,w+=s*$,O+=s*G,S+=s*z,x+=s*H,A+=s*J,C+=s*V,M+=s*Y,I+=s*W,N+=s*X,g+=(s=t[12])*U,m+=s*L,_+=s*K,v+=s*B,P+=s*F,E+=s*D,w+=s*q,O+=s*$,S+=s*G,x+=s*z,A+=s*H,C+=s*J,M+=s*V,I+=s*Y,N+=s*W,k+=s*X,m+=(s=t[13])*U,_+=s*L,v+=s*K,P+=s*B,E+=s*F,w+=s*D,O+=s*q,S+=s*$,x+=s*G,A+=s*z,C+=s*H,M+=s*J,I+=s*V,N+=s*Y,k+=s*W,T+=s*X,_+=(s=t[14])*U,v+=s*L,P+=s*K,E+=s*B,w+=s*F,O+=s*D,S+=s*q,x+=s*$,A+=s*G,C+=s*z,M+=s*H,I+=s*J,N+=s*V,k+=s*Y,T+=s*W,j+=s*X,v+=(s=t[15])*U,P+=s*L,E+=s*K,w+=s*B,O+=s*F,S+=s*D,x+=s*q,A+=s*$,C+=s*G,M+=s*z,I+=s*H,N+=s*J,k+=s*V,T+=s*Y,j+=s*W,R+=s*X,n+=38*P,o+=38*E,a+=38*w,c+=38*O,u+=38*S,h+=38*x,l+=38*A,d+=38*C,f+=38*M,p+=38*I,b+=38*N,y+=38*k,g+=38*T,m+=38*j,_+=38*R,i=Math.floor((s=n+(i=1)+65535)/65536),n=s-65536*i,i=Math.floor((s=o+i+65535)/65536),o=s-65536*i,i=Math.floor((s=a+i+65535)/65536),a=s-65536*i,i=Math.floor((s=c+i+65535)/65536),c=s-65536*i,i=Math.floor((s=u+i+65535)/65536),u=s-65536*i,i=Math.floor((s=h+i+65535)/65536),h=s-65536*i,i=Math.floor((s=l+i+65535)/65536),l=s-65536*i,i=Math.floor((s=d+i+65535)/65536),d=s-65536*i,i=Math.floor((s=f+i+65535)/65536),f=s-65536*i,i=Math.floor((s=p+i+65535)/65536),p=s-65536*i,i=Math.floor((s=b+i+65535)/65536),b=s-65536*i,i=Math.floor((s=y+i+65535)/65536),y=s-65536*i,i=Math.floor((s=g+i+65535)/65536),g=s-65536*i,i=Math.floor((s=m+i+65535)/65536),m=s-65536*i,i=Math.floor((s=_+i+65535)/65536),_=s-65536*i,i=Math.floor((s=v+i+65535)/65536),v=s-65536*i,n+=i-1+37*(i-1),i=Math.floor((s=n+(i=1)+65535)/65536),n=s-65536*i,i=Math.floor((s=o+i+65535)/65536),o=s-65536*i,i=Math.floor((s=a+i+65535)/65536),a=s-65536*i,i=Math.floor((s=c+i+65535)/65536),c=s-65536*i,i=Math.floor((s=u+i+65535)/65536),u=s-65536*i,i=Math.floor((s=h+i+65535)/65536),h=s-65536*i,i=Math.floor((s=l+i+65535)/65536),l=s-65536*i,i=Math.floor((s=d+i+65535)/65536),d=s-65536*i,i=Math.floor((s=f+i+65535)/65536),f=s-65536*i,i=Math.floor((s=p+i+65535)/65536),p=s-65536*i,i=Math.floor((s=b+i+65535)/65536),b=s-65536*i,i=Math.floor((s=y+i+65535)/65536),y=s-65536*i,i=Math.floor((s=g+i+65535)/65536),g=s-65536*i,i=Math.floor((s=m+i+65535)/65536),m=s-65536*i,i=Math.floor((s=_+i+65535)/65536),_=s-65536*i,i=Math.floor((s=v+i+65535)/65536),v=s-65536*i,n+=i-1+37*(i-1),e[0]=n,e[1]=o,e[2]=a,e[3]=c,e[4]=u,e[5]=h,e[6]=l,e[7]=d,e[8]=f,e[9]=p,e[10]=b,e[11]=y,e[12]=g,e[13]=m,e[14]=_,e[15]=v}function D(e,t){F(e,t,t)}function q(e,t){var r,i=s();for(r=0;r<16;r++)i[r]=t[r];for(r=253;r>=0;r--)D(i,i),2!==r&&4!==r&&F(i,i,t);for(r=0;r<16;r++)e[r]=i[r]}function $(e,t){var r,i=s();for(r=0;r<16;r++)i[r]=t[r];for(r=250;r>=0;r--)D(i,i),1!==r&&F(i,i,t);for(r=0;r<16;r++)e[r]=i[r]}function G(e,t,r){var i,n,o=new Uint8Array(32),a=new Float64Array(80),c=s(),h=s(),l=s(),d=s(),f=s(),p=s();for(n=0;n<31;n++)o[n]=t[n];for(o[31]=127&t[31]|64,o[0]&=248,L(a,r),n=0;n<16;n++)h[n]=a[n],d[n]=c[n]=l[n]=0;for(n=254,c[0]=d[0]=1;n>=0;--n)T(c,h,i=o[n>>>3]>>>(7&n)&1),T(l,d,i),K(f,c,l),B(c,c,l),K(l,h,d),B(h,h,d),D(d,f),D(p,c),F(c,l,c),F(l,h,f),K(f,c,l),B(c,c,l),D(h,c),B(l,d,p),F(c,l,u),K(c,c,d),F(l,l,c),F(c,d,p),F(d,h,a),D(h,f),T(c,h,i),T(l,d,i);for(n=0;n<16;n++)a[n+16]=c[n],a[n+32]=l[n],a[n+48]=h[n],a[n+64]=d[n];var b=a.subarray(32),y=a.subarray(16);return q(b,b),F(y,y,b),j(e,y),0}function z(e,t){return G(e,t,o)}function H(e,t){return i(t,32),z(e,t)}function J(e,t,r){var s=new Uint8Array(32);return G(s,r,t),v(e,n,s,P)}x.prototype.blocks=function(e,t,r){for(var s,i,n,o,a,c,u,h,l,d,f,p,b,y,g,m,_,v,P,E=this.fin?0:2048,w=this.h[0],O=this.h[1],S=this.h[2],x=this.h[3],A=this.h[4],C=this.h[5],M=this.h[6],I=this.h[7],N=this.h[8],k=this.h[9],T=this.r[0],j=this.r[1],R=this.r[2],U=this.r[3],L=this.r[4],K=this.r[5],B=this.r[6],F=this.r[7],D=this.r[8],q=this.r[9];r>=16;)w+=8191&(s=255&e[t+0]|(255&e[t+1])<<8),O+=(s>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3)&8191,S+=(i>>>10|(n=255&e[t+4]|(255&e[t+5])<<8)<<6)&8191,x+=(n>>>7|(o=255&e[t+6]|(255&e[t+7])<<8)<<9)&8191,A+=(o>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12)&8191,C+=a>>>1&8191,M+=(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2)&8191,I+=(c>>>11|(u=255&e[t+12]|(255&e[t+13])<<8)<<5)&8191,N+=(u>>>8|(h=255&e[t+14]|(255&e[t+15])<<8)<<8)&8191,k+=h>>>5|E,l=(d=(l=0)+w*T+5*q*O+5*D*S+5*F*x+5*B*A)>>>13,d&=8191,d+=5*K*C+5*L*M+5*U*I+5*R*N+5*j*k,l+=d>>>13,d&=8191,l=(f=l+w*j+O*T+5*q*S+5*D*x+5*F*A)>>>13,f&=8191,f+=5*B*C,f+=5*K*M,f+=5*L*I,f+=5*U*N,f+=5*R*k,l+=f>>>13,f&=8191,l=(p=l+w*R+O*j+S*T+5*q*x+5*D*A)>>>13,p&=8191,p+=5*F*C,p+=5*B*M,p+=5*K*I,p+=5*L*N,p+=5*U*k,l+=p>>>13,p&=8191,l=(b=l+w*U+O*R+S*j+x*T+5*q*A)>>>13,b&=8191,b+=5*D*C,b+=5*F*M,b+=5*B*I,b+=5*K*N,b+=5*L*k,l+=b>>>13,b&=8191,l=(y=l+w*L+O*U+S*R+x*j+A*T)>>>13,y&=8191,y+=5*q*C,y+=5*D*M,y+=5*F*I,y+=5*B*N,y+=5*K*k,l+=y>>>13,y&=8191,l=(g=l+w*K+O*L+S*U+x*R+A*j)>>>13,g&=8191,g+=C*T,g+=5*q*M,g+=5*D*I,g+=5*F*N,g+=5*B*k,l+=g>>>13,g&=8191,l=(m=l+w*B+O*K+S*L+x*U+A*R)>>>13,m&=8191,m+=C*j,m+=M*T,m+=5*q*I,m+=5*D*N,m+=5*F*k,l+=m>>>13,m&=8191,l=(_=l+w*F+O*B+S*K+x*L+A*U)>>>13,_&=8191,_+=C*R,_+=M*j,_+=I*T,_+=5*q*N,_+=5*D*k,l+=_>>>13,_&=8191,l=(v=l+w*D+O*F+S*B+x*K+A*L)>>>13,v&=8191,v+=C*U,v+=M*R,v+=I*j,v+=N*T,v+=5*q*k,l+=v>>>13,v&=8191,l=(P=l+w*q+O*D+S*F+x*B+A*K)>>>13,P&=8191,P+=C*L,P+=M*U,P+=I*R,P+=N*j,P+=k*T,l+=P>>>13,P&=8191,d=8191&(l=(l=(l<<2)+l|0)+d|0),l>>>=13,f+=l,w=d,O=f,S=p,x=b,A=y,C=g,M=m,I=_,N=v,k=P,t+=16,r-=16;this.h[0]=w,this.h[1]=O,this.h[2]=S,this.h[3]=x,this.h[4]=A,this.h[5]=C,this.h[6]=M,this.h[7]=I,this.h[8]=N,this.h[9]=k},x.prototype.finish=function(e,t){var r,s,i,n,o=new Uint16Array(10);if(this.leftover){for(n=this.leftover,this.buffer[n++]=1;n<16;n++)this.buffer[n]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,n=2;n<10;n++)this.h[n]+=r,r=this.h[n]>>>13,this.h[n]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,o[0]=this.h[0]+5,r=o[0]>>>13,o[0]&=8191,n=1;n<10;n++)o[n]=this.h[n]+r,r=o[n]>>>13,o[n]&=8191;for(o[9]-=8192,s=(1^r)-1,n=0;n<10;n++)o[n]&=s;for(n=0,s=~s;n<10;n++)this.h[n]=this.h[n]&s|o[n];for(n=1,this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,i=this.h[0]+this.pad[0],this.h[0]=65535&i;n<8;n++)i=(this.h[n]+this.pad[n]|0)+(i>>>16)|0,this.h[n]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},x.prototype.update=function(e,t,r){var s,i;if(this.leftover){for((i=16-this.leftover)>r&&(i=r),s=0;s<i;s++)this.buffer[this.leftover+s]=e[t+s];if(r-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(i=r-r%16,this.blocks(e,t,i),t+=i,r-=i),r){for(s=0;s<r;s++)this.buffer[this.leftover+s]=e[t+s];this.leftover+=r}};var V=[0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0xfc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x6ca6351,0xe003826f,0x14292967,0xa0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x6f067aa,0x72176fba,0xa637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817];function Y(e,t,r,s){for(var i,n,o,a,c,u,h,l,d,f,p,b,y,g,m,_,v,P,E,w,O,S,x,A,C,M,I=new Int32Array(16),N=new Int32Array(16),k=e[0],T=e[1],j=e[2],R=e[3],U=e[4],L=e[5],K=e[6],B=e[7],F=t[0],D=t[1],q=t[2],$=t[3],G=t[4],z=t[5],H=t[6],J=t[7],Y=0;s>=128;){for(E=0;E<16;E++)w=8*E+Y,I[E]=r[w+0]<<24|r[w+1]<<16|r[w+2]<<8|r[w+3],N[E]=r[w+4]<<24|r[w+5]<<16|r[w+6]<<8|r[w+7];for(E=0;E<80;E++)if(i=k,n=T,o=j,a=R,c=U,u=L,h=K,l=B,d=F,f=D,p=q,b=$,y=G,g=z,m=H,_=J,O=B,x=65535&(S=J),A=S>>>16,C=65535&O,M=O>>>16,O=(U>>>14|G<<18)^(U>>>18|G<<14)^(G>>>9|U<<23),x+=65535&(S=(G>>>14|U<<18)^(G>>>18|U<<14)^(U>>>9|G<<23)),A+=S>>>16,C+=65535&O,M+=O>>>16,O=U&L^~U&K,x+=65535&(S=G&z^~G&H),A+=S>>>16,C+=65535&O,M+=O>>>16,O=V[2*E],x+=65535&(S=V[2*E+1]),A+=S>>>16,C+=65535&O,M+=O>>>16,O=I[E%16],x+=65535&(S=N[E%16]),A+=S>>>16,C+=65535&O,M+=O>>>16,A+=x>>>16,C+=A>>>16,M+=C>>>16,v=65535&C|M<<16,P=65535&x|A<<16,O=v,x=65535&(S=P),A=S>>>16,C=65535&O,M=O>>>16,O=(k>>>28|F<<4)^(F>>>2|k<<30)^(F>>>7|k<<25),x+=65535&(S=(F>>>28|k<<4)^(k>>>2|F<<30)^(k>>>7|F<<25)),A+=S>>>16,C+=65535&O,M+=O>>>16,O=k&T^k&j^T&j,x+=65535&(S=F&D^F&q^D&q),A+=S>>>16,C+=65535&O,M+=O>>>16,A+=x>>>16,C+=A>>>16,M+=C>>>16,l=65535&C|M<<16,_=65535&x|A<<16,O=a,x=65535&(S=b),A=S>>>16,C=65535&O,M=O>>>16,O=v,x+=65535&(S=P),A+=S>>>16,C+=65535&O,M+=O>>>16,A+=x>>>16,C+=A>>>16,M+=C>>>16,a=65535&C|M<<16,b=65535&x|A<<16,T=i,j=n,R=o,U=a,L=c,K=u,B=h,k=l,D=d,q=f,$=p,G=b,z=y,H=g,J=m,F=_,E%16==15)for(w=0;w<16;w++)O=I[w],x=65535&(S=N[w]),A=S>>>16,C=65535&O,M=O>>>16,O=I[(w+9)%16],x+=65535&(S=N[(w+9)%16]),A+=S>>>16,C+=65535&O,M+=O>>>16,O=((v=I[(w+1)%16])>>>1|(P=N[(w+1)%16])<<31)^(v>>>8|P<<24)^v>>>7,x+=65535&(S=(P>>>1|v<<31)^(P>>>8|v<<24)^(P>>>7|v<<25)),A+=S>>>16,C+=65535&O,M+=O>>>16,O=((v=I[(w+14)%16])>>>19|(P=N[(w+14)%16])<<13)^(P>>>29|v<<3)^v>>>6,x+=65535&(S=(P>>>19|v<<13)^(v>>>29|P<<3)^(P>>>6|v<<26)),A+=S>>>16,C+=65535&O,M+=O>>>16,A+=x>>>16,C+=A>>>16,M+=C>>>16,I[w]=65535&C|M<<16,N[w]=65535&x|A<<16;O=k,x=65535&(S=F),A=S>>>16,C=65535&O,M=O>>>16,O=e[0],x+=65535&(S=t[0]),A+=S>>>16,C+=65535&O,M+=O>>>16,A+=x>>>16,C+=A>>>16,M+=C>>>16,e[0]=k=65535&C|M<<16,t[0]=F=65535&x|A<<16,O=T,x=65535&(S=D),A=S>>>16,C=65535&O,M=O>>>16,O=e[1],x+=65535&(S=t[1]),A+=S>>>16,C+=65535&O,M+=O>>>16,A+=x>>>16,C+=A>>>16,M+=C>>>16,e[1]=T=65535&C|M<<16,t[1]=D=65535&x|A<<16,O=j,x=65535&(S=q),A=S>>>16,C=65535&O,M=O>>>16,O=e[2],x+=65535&(S=t[2]),A+=S>>>16,C+=65535&O,M+=O>>>16,A+=x>>>16,C+=A>>>16,M+=C>>>16,e[2]=j=65535&C|M<<16,t[2]=q=65535&x|A<<16,O=R,x=65535&(S=$),A=S>>>16,C=65535&O,M=O>>>16,O=e[3],x+=65535&(S=t[3]),A+=S>>>16,C+=65535&O,M+=O>>>16,A+=x>>>16,C+=A>>>16,M+=C>>>16,e[3]=R=65535&C|M<<16,t[3]=$=65535&x|A<<16,O=U,x=65535&(S=G),A=S>>>16,C=65535&O,M=O>>>16,O=e[4],x+=65535&(S=t[4]),A+=S>>>16,C+=65535&O,M+=O>>>16,A+=x>>>16,C+=A>>>16,M+=C>>>16,e[4]=U=65535&C|M<<16,t[4]=G=65535&x|A<<16,O=L,x=65535&(S=z),A=S>>>16,C=65535&O,M=O>>>16,O=e[5],x+=65535&(S=t[5]),A+=S>>>16,C+=65535&O,M+=O>>>16,A+=x>>>16,C+=A>>>16,M+=C>>>16,e[5]=L=65535&C|M<<16,t[5]=z=65535&x|A<<16,O=K,x=65535&(S=H),A=S>>>16,C=65535&O,M=O>>>16,O=e[6],x+=65535&(S=t[6]),A+=S>>>16,C+=65535&O,M+=O>>>16,A+=x>>>16,C+=A>>>16,M+=C>>>16,e[6]=K=65535&C|M<<16,t[6]=H=65535&x|A<<16,O=B,x=65535&(S=J),A=S>>>16,C=65535&O,M=O>>>16,O=e[7],x+=65535&(S=t[7]),A+=S>>>16,C+=65535&O,M+=O>>>16,A+=x>>>16,C+=A>>>16,M+=C>>>16,e[7]=B=65535&C|M<<16,t[7]=J=65535&x|A<<16,Y+=128,s-=128}return s}function W(e,t,r){var s,i=new Int32Array(8),n=new Int32Array(8),o=new Uint8Array(256),a=r;for(i[0]=0x6a09e667,i[1]=0xbb67ae85,i[2]=0x3c6ef372,i[3]=0xa54ff53a,i[4]=0x510e527f,i[5]=0x9b05688c,i[6]=0x1f83d9ab,i[7]=0x5be0cd19,n[0]=0xf3bcc908,n[1]=0x84caa73b,n[2]=0xfe94f82b,n[3]=0x5f1d36f1,n[4]=0xade682d1,n[5]=0x2b3e6c1f,n[6]=0xfb41bd6b,n[7]=0x137e2179,Y(i,n,t,r),r%=128,s=0;s<r;s++)o[s]=t[a-r+s];for(o[r]=128,o[(r=256-128*(r<112?1:0))-9]=0,b(o,r-8,a/0x20000000|0,a<<3),Y(i,n,o,r),s=0;s<8;s++)b(e,8*s,i[s],n[s]);return 0}function X(e,t){var r=s(),i=s(),n=s(),o=s(),a=s(),c=s(),u=s(),h=s(),d=s();B(r,e[1],e[0]),B(d,t[1],t[0]),F(r,r,d),K(i,e[0],e[1]),K(d,t[0],t[1]),F(i,i,d),F(n,e[3],t[3]),F(n,n,l),F(o,e[2],t[2]),K(o,o,o),B(a,i,r),B(c,o,n),K(u,o,n),K(h,i,r),F(e[0],a,c),F(e[1],h,u),F(e[2],u,c),F(e[3],a,h)}function Z(e,t,r){var s;for(s=0;s<4;s++)T(e[s],t[s],r)}function Q(e,t){var r=s(),i=s(),n=s();q(n,t[2]),F(r,t[0],n),F(i,t[1],n),j(e,i),e[31]^=U(r)<<7}function ee(e,t,r){var s,i;for(N(e[0],a),N(e[1],c),N(e[2],c),N(e[3],a),i=255;i>=0;--i)Z(e,t,s=r[i/8|0]>>(7&i)&1),X(t,e),X(e,e),Z(e,t,s)}function et(e,t){var r=[s(),s(),s(),s()];N(r[0],d),N(r[1],f),N(r[2],c),F(r[3],d,f),ee(e,r,t)}function er(e,t,r){var n,o=new Uint8Array(64),a=[s(),s(),s(),s()];for(r||i(t,32),W(o,t,32),o[0]&=248,o[31]&=127,o[31]|=64,et(a,o),Q(e,a),n=0;n<32;n++)t[n+32]=e[n];return 0}var es=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ei(e,t){var r,s,i,n;for(s=63;s>=32;--s){for(r=0,i=s-32,n=s-12;i<n;++i)t[i]+=r-16*t[s]*es[i-(s-32)],r=Math.floor((t[i]+128)/256),t[i]-=256*r;t[i]+=r,t[s]=0}for(i=0,r=0;i<32;i++)t[i]+=r-(t[31]>>4)*es[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=r*es[i];for(s=0;s<32;s++)t[s+1]+=t[s]>>8,e[s]=255&t[s]}function en(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;ei(e,r)}function eo(e,t,r,i){var n,o,a=new Uint8Array(64),c=new Uint8Array(64),u=new Uint8Array(64),h=new Float64Array(64),l=[s(),s(),s(),s()];for(W(a,i,32),a[0]&=248,a[31]&=127,a[31]|=64,n=0;n<r;n++)e[64+n]=t[n];for(n=0;n<32;n++)e[32+n]=a[32+n];for(W(u,e.subarray(32),r+32),en(u),et(l,u),Q(e,l),n=32;n<64;n++)e[n]=i[n];for(W(c,e,r+64),en(c),n=0;n<64;n++)h[n]=0;for(n=0;n<32;n++)h[n]=u[n];for(n=0;n<32;n++)for(o=0;o<32;o++)h[n+o]+=c[n]*a[o];return ei(e.subarray(32),h),r+64}function ea(e,t,r,i){var n,o,u,l,d,f,b,y,g=new Uint8Array(32),_=new Uint8Array(64),v=[s(),s(),s(),s()],P=[s(),s(),s(),s()];if(r<64||(n=s(),o=s(),u=s(),l=s(),d=s(),f=s(),b=s(),(N(P[2],c),L(P[1],i),D(u,P[1]),F(l,u,h),B(u,u,P[2]),K(l,P[2],l),D(d,l),D(f,d),F(b,f,d),F(n,b,u),F(n,n,l),$(n,n),F(n,n,u),F(n,n,l),F(n,n,l),F(P[0],n,l),D(o,P[0]),F(o,o,l),R(o,u)&&F(P[0],P[0],p),D(o,P[0]),F(o,o,l),R(o,u))?-1:(U(P[0])===i[31]>>7&&B(P[0],a,P[0]),F(P[3],P[0],P[1]),0)))return -1;for(y=0;y<r;y++)e[y]=t[y];for(y=0;y<32;y++)e[y+32]=i[y];if(W(_,e,r),en(_),ee(v,P,_),et(P,t.subarray(32)),X(v,P),Q(g,v),r-=64,m(t,0,g,0)){for(y=0;y<r;y++)e[y]=0;return -1}for(y=0;y<r;y++)e[y]=t[y+64];return r}function ec(e,t){if(32!==e.length)throw Error("bad key size");if(24!==t.length)throw Error("bad nonce size")}function eu(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw TypeError("unexpected type, use Uint8Array")}function eh(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:v,crypto_stream_xor:S,crypto_stream:O,crypto_stream_salsa20_xor:E,crypto_stream_salsa20:w,crypto_onetimeauth:A,crypto_onetimeauth_verify:C,crypto_verify_16:g,crypto_verify_32:m,crypto_secretbox:M,crypto_secretbox_open:I,crypto_scalarmult:G,crypto_scalarmult_base:z,crypto_box_beforenm:J,crypto_box_afternm:M,crypto_box:function(e,t,r,s,i,n){var o=new Uint8Array(32);return J(o,i,n),M(e,t,r,s,o)},crypto_box_open:function(e,t,r,s,i,n){var o=new Uint8Array(32);return J(o,i,n),I(e,t,r,s,o)},crypto_box_keypair:H,crypto_hash:W,crypto_sign:eo,crypto_sign_keypair:er,crypto_sign_open:ea,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:s,D:h,L:es,pack25519:j,unpack25519:L,M:F,A:K,S:D,Z:B,pow2523:$,add:X,set25519:N,modL:ei,scalarmult:ee,scalarbase:et},e.randomBytes=function(e){var t=new Uint8Array(e);return i(t,e),t},e.secretbox=function(e,t,r){eu(e,t,r),ec(r,t);for(var s=new Uint8Array(32+e.length),i=new Uint8Array(s.length),n=0;n<e.length;n++)s[n+32]=e[n];return M(i,s,s.length,t,r),i.subarray(16)},e.secretbox.open=function(e,t,r){eu(e,t,r),ec(r,t);for(var s=new Uint8Array(16+e.length),i=new Uint8Array(s.length),n=0;n<e.length;n++)s[n+16]=e[n];return s.length<32||0!==I(i,s,s.length,t,r)?null:i.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(eu(e,t),32!==e.length)throw Error("bad n size");if(32!==t.length)throw Error("bad p size");var r=new Uint8Array(32);return G(r,e,t),r},e.scalarMult.base=function(e){if(eu(e),32!==e.length)throw Error("bad n size");var t=new Uint8Array(32);return z(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,s,i){var n=e.box.before(s,i);return e.secretbox(t,r,n)},e.box.before=function(e,t){eu(e,t),function(e,t){if(32!==e.length)throw Error("bad public key size");if(32!==t.length)throw Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return J(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,s,i){var n=e.box.before(s,i);return e.secretbox.open(t,r,n)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return H(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(eu(e),32!==e.length)throw Error("bad secret key size");var t=new Uint8Array(32);return z(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(eu(e,t),64!==t.length)throw Error("bad secret key size");var r=new Uint8Array(64+e.length);return eo(r,e,e.length,t),r},e.sign.open=function(e,t){if(eu(e,t),32!==t.length)throw Error("bad public key size");var r=new Uint8Array(e.length),s=ea(r,e,e.length,t);if(s<0)return null;for(var i=new Uint8Array(s),n=0;n<i.length;n++)i[n]=r[n];return i},e.sign.detached=function(t,r){for(var s=e.sign(t,r),i=new Uint8Array(64),n=0;n<i.length;n++)i[n]=s[n];return i},e.sign.detached.verify=function(e,t,r){if(eu(e,t,r),64!==t.length)throw Error("bad signature size");if(32!==r.length)throw Error("bad public key size");var s,i=new Uint8Array(64+e.length),n=new Uint8Array(64+e.length);for(s=0;s<64;s++)i[s]=t[s];for(s=0;s<e.length;s++)i[s+64]=e[s];return ea(n,i,i.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(64);return er(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(eu(e),64!==e.length)throw Error("bad secret key size");for(var t=new Uint8Array(32),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(eu(e),32!==e.length)throw Error("bad seed size");for(var t=new Uint8Array(32),r=new Uint8Array(64),s=0;s<32;s++)r[s]=e[s];return er(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=32,e.sign.secretKeyLength=64,e.sign.seedLength=32,e.sign.signatureLength=64,e.hash=function(e){eu(e);var t=new Uint8Array(64);return W(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return eu(e,t),0!==e.length&&0!==t.length&&e.length===t.length&&0===y(e,0,t,0,e.length)},e.setPRNG=function(e){i=e},(t="undefined"!=typeof self?self.crypto||self.msCrypto:null)&&t.getRandomValues?e.setPRNG(function(e,r){var s,i=new Uint8Array(r);for(s=0;s<r;s+=65536)t.getRandomValues(i.subarray(s,s+Math.min(r-s,65536)));for(s=0;s<r;s++)e[s]=i[s];eh(i)}):(t=r(8308))&&t.randomBytes&&e.setPRNG(function(e,r){var s,i=t.randomBytes(r);for(s=0;s<r;s++)e[s]=i[s];eh(i)})}(e.exports?e.exports:self.nacl=self.nacl||{})}}]);